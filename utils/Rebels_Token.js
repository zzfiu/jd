/*
主要获取 isvObfuscator token值

获取签名，自定义使用方法如下

  - 请求 API 获取

    export JD_SIGN_API="" # 接口地址，例：http://127.0.0.1:3000/api/getSign，默认 'http://api.nolanstore.cc/sign'
    export JD_SIGN_API_BODY_FIELD="" # body参数字段名，默认 'body'
    export JD_SIGN_API_FUNCTIONID_FIELD="" # functionId参数字段名，默认 'fn'
    export JD_SIGN_API_METHOD="" # 请求方法，默认 'POST'，自定义仅支持 'GET'
    export JD_SIGN_API_CONTENT_TYPE="" # 请求头 'Content-Type'，默认 'application/json; charset=utf-8'，支持 'application/x-www-form-urlencoded' 格式
    JSON响应格式解析的字段目前仅支持 `body` `convertUrl` `convertUrlNew`

  - 本地自定义脚本生成

    如果存在本地签名生成脚本则会优先加载本地签名，具体规范如下：
    - 1. 需要将脚本命名为 Rebels_Sign.js 并存储在与 Rebels_Token 脚本同一目录下
    - 2. 调用函数名为 genSign 并且需要 export 导出
    - 3. 函数固定两个传参，分别是 functionId（函数id） 和 bodyParams（body参数对象）
    - 4. 函数需要返回含有 body、st、sign、sv 等关键字段的url参数形式的签名字符串

  不管通过何种途径获取签名，最终需要的签名形式为url参数格式且至少包含 `body` `st` `sv` `sign` 字段



new Env('Rebels_Token');
*/

var iｉl='jsjiami.com.v7';const IlIli1=iii1II;(function(llllI,lllil1,iil1il,ilil1I,i11il1,ii1iiI,lllilI){return llllI=llllI>>0x2,ii1iiI='hs',lllilI='hs',function(ilil11,illlI1,IIIl11,I1lIi1,liiIIi){const li1i1i=iii1II;I1lIi1='tfi',ii1iiI=I1lIi1+ii1iiI,liiIIi='up',lllilI+=liiIIi,ii1iiI=IIIl11(ii1iiI),lllilI=IIIl11(lllilI),IIIl11=0x0;const lil11I=ilil11();while(!![]&&--ilil1I+illlI1){try{I1lIi1=parseInt(li1i1i(0x162,'9fVf'))/0x1*(parseInt(li1i1i(0x17d,'lWL%'))/0x2)+parseInt(li1i1i(0x19a,'c!&d'))/0x3*(-parseInt(li1i1i(0x168,'vK*9'))/0x4)+parseInt(li1i1i(0xfe,'E$LL'))/0x5*(-parseInt(li1i1i(0xfc,'TVry'))/0x6)+-parseInt(li1i1i(0x151,'KMeY'))/0x7*(parseInt(li1i1i(0x185,'bUw('))/0x8)+parseInt(li1i1i(0x130,'XNOt'))/0x9+parseInt(li1i1i(0x19b,'ndMh'))/0xa*(-parseInt(li1i1i(0x10a,'I7[['))/0xb)+parseInt(li1i1i(0x107,'3uz8'))/0xc*(parseInt(li1i1i(0x10c,'&Z&t'))/0xd);}catch(Iliii1){I1lIi1=IIIl11;}finally{liiIIi=lil11I[ii1iiI]();if(llllI<=ilil1I)IIIl11?i11il1?I1lIi1=liiIIi:i11il1=liiIIi:IIIl11=liiIIi;else{if(IIIl11==i11il1['replace'](/[TKdFxOQbBGHNtqWkDSRw=]/g,'')){if(I1lIi1===illlI1){lil11I['un'+ii1iiI](liiIIi);break;}lil11I[lllilI](liiIIi);}}}}}(iil1il,lllil1,function(iIiIi,iil1ll,iiilil,iil1li,lillIl,iIiIl,iiilii){return iil1ll='\x73\x70\x6c\x69\x74',iIiIi=arguments[0x0],iIiIi=iIiIi[iil1ll](''),iiilil=`\x72\x65\x76\x65\x72\x73\x65`,iIiIi=iIiIi[iiilil]('\x76'),iil1li=`\x6a\x6f\x69\x6e`,(0x1641de,iIiIi[iil1li](''));});}(0x30c,0xdcdba,Iii11l,0xc5),Iii11l)&&(iｉl=0xc5);const path=require(IlIli1(0x13e,'srNs')),common=require(IlIli1(0x194,')A!n'));function iii1II(_0x49b86a,_0x4675f3){const _0x4b0476=Iii11l();return iii1II=function(_0x3f6ba0,_0x396ca8){_0x3f6ba0=_0x3f6ba0-0xb7;let _0xa91656=_0x4b0476[_0x3f6ba0];if(iii1II['LguCNs']===undefined){var _0x34f9d0=function(_0x2825c4){const _0xc5f099='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x250b2e='',_0x1d41be='';for(let _0x2ccd91=0x0,_0x51756d,_0x50d2df,_0x49ef2e=0x0;_0x50d2df=_0x2825c4['charAt'](_0x49ef2e++);~_0x50d2df&&(_0x51756d=_0x2ccd91%0x4?_0x51756d*0x40+_0x50d2df:_0x50d2df,_0x2ccd91++%0x4)?_0x250b2e+=String['fromCharCode'](0xff&_0x51756d>>(-0x2*_0x2ccd91&0x6)):0x0){_0x50d2df=_0xc5f099['indexOf'](_0x50d2df);}for(let _0x1c86eb=0x0,_0x594701=_0x250b2e['length'];_0x1c86eb<_0x594701;_0x1c86eb++){_0x1d41be+='%'+('00'+_0x250b2e['charCodeAt'](_0x1c86eb)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1d41be);};const _0x3a98cd=function(_0x3926c1,_0x27c4b0){let _0x33d1f9=[],_0x56713c=0x0,_0xcf12e0,_0x41786d='';_0x3926c1=_0x34f9d0(_0x3926c1);let _0x1d295b;for(_0x1d295b=0x0;_0x1d295b<0x100;_0x1d295b++){_0x33d1f9[_0x1d295b]=_0x1d295b;}for(_0x1d295b=0x0;_0x1d295b<0x100;_0x1d295b++){_0x56713c=(_0x56713c+_0x33d1f9[_0x1d295b]+_0x27c4b0['charCodeAt'](_0x1d295b%_0x27c4b0['length']))%0x100,_0xcf12e0=_0x33d1f9[_0x1d295b],_0x33d1f9[_0x1d295b]=_0x33d1f9[_0x56713c],_0x33d1f9[_0x56713c]=_0xcf12e0;}_0x1d295b=0x0,_0x56713c=0x0;for(let _0x258c52=0x0;_0x258c52<_0x3926c1['length'];_0x258c52++){_0x1d295b=(_0x1d295b+0x1)%0x100,_0x56713c=(_0x56713c+_0x33d1f9[_0x1d295b])%0x100,_0xcf12e0=_0x33d1f9[_0x1d295b],_0x33d1f9[_0x1d295b]=_0x33d1f9[_0x56713c],_0x33d1f9[_0x56713c]=_0xcf12e0,_0x41786d+=String['fromCharCode'](_0x3926c1['charCodeAt'](_0x258c52)^_0x33d1f9[(_0x33d1f9[_0x1d295b]+_0x33d1f9[_0x56713c])%0x100]);}return _0x41786d;};iii1II['wZEoAf']=_0x3a98cd,_0x49b86a=arguments,iii1II['LguCNs']=!![];}const _0x146781=_0x4b0476[0x0],_0xa3c5f6=_0x3f6ba0+_0x146781,_0x519cf9=_0x49b86a[_0xa3c5f6];return!_0x519cf9?(iii1II['McQFHW']===undefined&&(iii1II['McQFHW']=!![]),_0xa91656=iii1II['wZEoAf'](_0xa91656,_0x396ca8),_0x49b86a[_0xa3c5f6]=_0xa91656):_0xa91656=_0x519cf9,_0xa91656;},iii1II(_0x49b86a,_0x4675f3);}let scriptName=null,expireMinutes=0x1d;try{let tmpMinutes=parseInt(process[IlIli1(0x190,'7AEE')][IlIli1(0x11c,'T(3e')]||'29');expireMinutes=tmpMinutes;}catch{}const cacheDefaultTTL=expireMinutes*0x3c*0x3e8,Cache=require(IlIli1(0x13d,'(#1n')),cacheFile=new Cache(cacheDefaultTTL,process[IlIli1(0x182,'HclO')][IlIli1(0x172,'NAcT')]||__dirname+IlIli1(0x141,'BEnK')),lzkjPinFilter=(process[IlIli1(0x171,'!P0O')][IlIli1(0xd1,'!P0O')]||'')[IlIli1(0xf0,'A2ri')]('@'),lzkjPinFilter_interactsaas_and_interaction_v1=(process[IlIli1(0x15a,'NAcT')][IlIli1(0x195,'7AEE')]||process[IlIli1(0xda,'Xwe1')][IlIli1(0x146,'7AEE')]||process['env']['JD_ISV_TOKEN_LZKJ_LOREAL_PIN_FILTER']||'')[IlIli1(0xd7,'KMeY')]('@'),lzkjPinFilter_interaction_v2=(process['env']['JD_ISV_TOKEN_LZKJ_INTERACTION_V2_PIN_FILTER']||'')[IlIli1(0x13f,'(#1n')]('@'),cjhyPinFilter=(process['env'][IlIli1(0x18f,'7AEE')]||'')['split']('@');let requestAxiosProxyConfig,requestDynamicProxyConfig;try{const proxyAddress=process[IlIli1(0x165,'hi0Y')]['RS_ISV_TOKEN_PROXY_TUNNRL']||process[IlIli1(0x188,'xg]f')][IlIli1(0x108,'XNOt')]||'';if(proxyAddress){const proxyConfig=common['_getProxyConfigWithAddress'](proxyAddress);proxyConfig?(requestAxiosProxyConfig=proxyConfig,console[IlIli1(0x12a,'7AEE')]('\x0a===============启用\x20getToken\x20代理池代理(新)==============\x0a')):console[IlIli1(0x150,'T(3e')](IlIli1(0xe1,'9fVf'));}else{const proxyApi=process[IlIli1(0x165,'hi0Y')][IlIli1(0x105,'!tn]')]||process[IlIli1(0x11d,'BCRj')][IlIli1(0x142,'^L]6')]||'';if(proxyApi){requestDynamicProxyConfig={'api':null,'proxyConfig':null,'useLimit':null,'timeLimit':null,'fetchFailContinue':null,'extractTimestamp':null,'lastUseTimeStamp':null,'usedTimes':null},requestDynamicProxyConfig[IlIli1(0x180,'bUw(')]=proxyApi;const useLimit=process[IlIli1(0xd3,'AdM#')][IlIli1(0x178,'ndMh')]||process['env'][IlIli1(0x131,'7UC)')]||'0';try{requestDynamicProxyConfig[IlIli1(0x17f,'(#1n')]=parseInt(useLimit);}catch{requestDynamicProxyConfig['useLimit']=0x1;}const timeLimit=process[IlIli1(0x17c,'Y)6!')][IlIli1(0xbc,'Xwe1')]||'10000';try{requestDynamicProxyConfig[IlIli1(0x14a,'Zdwg')]=parseInt(timeLimit);}catch{requestDynamicProxyConfig[IlIli1(0x18e,'NAcT')]=0x2710;}requestDynamicProxyConfig[IlIli1(0xf5,'vK*9')]=(process['env'][IlIli1(0x177,'srNs')]||IlIli1(0x143,'&Z&t'))===IlIli1(0x16d,'7UC)'),console[IlIli1(0x152,'AdM#')](IlIli1(0x199,'FOBH'));}}const globalProxy=process[IlIli1(0x11d,'BCRj')][IlIli1(0xdc,'hi0Y')]===IlIli1(0xdb,'OQ@H');if(globalProxy)try{require(IlIli1(0xeb,'T(3e')),console['log'](IlIli1(0x16c,'lWL%'));}catch(iI1liI){console[IlIli1(0x174,'BEnK')](IlIli1(0x173,'ndMh')+iI1liI['message']);}}catch{}const redisUrl=process[IlIli1(0x171,'!P0O')]['JD_ISV_TOKEN_REDIS_CACHE_URL']||'',redisKey=process[IlIli1(0xd2,'(CpV')]['JD_ISV_TOKEN_REDIS_CACHE_KEY']||'',redisSubmit=!(process[IlIli1(0xb8,'3(kC')][IlIli1(0x119,']VBh')]==='false'),hasRedisKey=/<pt_pin>/[IlIli1(0x13b,'rg!&')](redisKey);function Iii11l(){const lI1lli=(function(){return[...[iｉl,'xWtjQGsKjDiakmqiH.kcoNBmR.dvHTF7GSxORwbt==','5BwY6kYW576P6lsA6l6Y6l2a6kcD6k+M6lsX5yY077+d5yA75BgR5BgF6jwW772F','WQDvqCkeWOtcLCkrtHhcKKy','d8kMWRRcLG','WOGgqmogWRG','btJcHuddQq','W6tcSWKxdrJcHe16kCkibu9Kw8oM5zgW55sdn8klrJhdOSkLWQilxSo85lQ655o05Rg85lME55crDoAxRcGjW6ddLmoUW5yJWRBdT8kVjSoXWRbKW6it','W67dOSkvWQm','qmkPsmkdsW','W6dcMr/cN8on','WPdcM8ozW4lcMSk/e8klWRvZ','W6xdOmkX','gIpdH8k7WR7cPCk/zSomuXtdPCkiW6fBW5miyNJcMCkTy8oOe8oZ','4PYtW4NcJSkNWQP9W7JdG8kUWO9S5lIJ55ow5QUL5z2r5yUj6l6Q5AAB6ls+W5dINl9e','W6C/gq','paBdQ8kgWRJcGmkfzSoQDttdUmkJW4nJW7a','WRFdUSkGWQWgW4qD','lXZcMutdLmk4b1fmscpdVCoiEXVcImkHW7ngyCoOWQWdbudcUIFcRI9GWOHOWQBcOSoSWQqydG','dCk6WRBcI8knF8oiW7ZcHmkQcCkoWO/cLfqMWO/dS0tcPCoWixy8WRRdTGTQ','W4Gogd3cTG','8kAPUmkAxrXKW53cH8ovm8kMW5VMJ7FLJzJLKyBLUjxLVzNLUlWe4PY1WRVOT7lLJPFMLjVMLz0','W7LTBmkOW4H/W7tcH8ogw8oPl33dJa3dHa','hSo9uG','W5ZcUGiAarxdVHKIuSo0sW','d8k2umkTEW','WPBcNmoDW7ZcH8kHlCkw','ySklra','W48QpcxcNSoMhmkyW5W1W79KWPJdR8o8WO/dO8okwXLtqSkpsHPQ','W5ONWQG','i8k+rCkvCW','W5mMWRK','mSokhCoscSkVFwNcG0HSAmozfa','WORcMmonW6FcTa','W5FcN8omvCkOcXddHmoYW5BdRKe','W7uJlW','hdBcTbFcRuBdL8orhwbQWR1vla','W5JcTGmzabBcJXqVw8oNBrC','W68MW5BdPaqoFW','8kAOQmoMWPpdMu/cOmovW7LRjCkr5O655y2O5zoH5BQ75B2V5BQ+W63IN6JdNG','W4/dMSkKWOuh','ja7dTCkxWQhcMSknw8o3','dv/cG8kQWO5YW4KIWPZcRSozgxldUmoPWRbhW4ldTYLLW7L6W6NcQCkIdCkS','iNxcQG','ju/cSSkAWOW','fCkrumkLsq','4P+Ina/dQdujW4pcPUAuHoAnRow4SUI/QEAmHow+R+w7O8oT4PYHWQa','sCo8W6HFg3xdPCkBW6e8WQZcUd3dLSoMW641','dv/cG8kQWO5YW4KIWPZcRSozgxldT8o5WRnuW4ldRI5/W6nUW6hcPSkIg8k/iCoxC3xcICk6wsBcIvNcVCojW7JdNG3cLSkNy8knlSkvWOaKyMbPE8oiWQ15W5bw','DXNcNmoOW5K','WQH8A2NdUmkSrSkUW6iCW7LyWRa','W64IdeVcQSoofa','W7bEgCksW7zsWPvHWRu0W6hcLmkQFmk5gdFLKiZNLk7cQmo2W7SzWQhcGSkGWQWpySoAW6iG5lQq55opo+AvUu/dRmk8WRpcKfy1cfddLSoWjCk1WPCsgtnC','W4BdNr1maCo9sZm+','ACozWQBcSmk7F8oTW7G','jCkhWQS','atVdRqZcPu/dIG','W7COlqhcVmo7c8kzW6qsW7r4WPVdTCoOWO/dO8okwXLhtW','vCoKWOK','W4f4gSoggW','WRSfW4NcSe3dTCoCW7Pnk8onkW','AwRcObPIgG9L','WQOnW4ldKSovW7JcISknWO7cQtbfW77cHK8CWPS8WONcP8oSgmoFhgldHtJcLSoH','WRPYWO0','W6b/ESkqW7rHW7JcPW','WR9MW793qL3cHei5WP0','8lUBPNK2WQVdOcFcJ8ooe8o+kUISIEAZHoMwGUIST8kQ4PYIe+IpR+wpOEwkJUAdVos7JoErR+wCQEwEUEwKHUI3J+++Jow3GUIUM+E/SEI0UEI/IoISIUAYMW','4P+mWQ7cOmkmaCoepMHYWQ3dQ+s4SoEqREAOSEwCMUwlTUI/JowMUUI3T8ow4P22WQC','W4y7W7ZdHqG','W4D6pSoHjatdLCo1','aYBdQtdcVLZdLW','WPTKW6zGvW','l8kBWOBcUSkNASo4W4BcRCkikW','W5mKmCoHW60','WPRcTCkkW5FcMq','W6SNW48tW5bTWQXbWQe','WOldG8kC','W5hdMsTKcmkFdbylW5BdSq'],...(function(){return[...['WRiVW43dRSox','WOlcIfTKaSoSwW','f8o8qW','WOW3W7ddVSokW4FcUmkWWRu','cJ/dQIVcMvVdGCkOn0m0WP8CFcxdNW','W4RdISkyWQaMW4yov1JcImkoWP10xbCDW7VdLmkcWR/cPmoyW5xcRbpdSYvb','W7LAW5a','i8ktzW','kgpcSuWEyCk6WRtdSmkSzq','ecRcTx7dPSkjpq','WOFcLCkIW43cN2q','WQSQW4rSW7G','W6bKWPFdRX8','jCknWQjMfSku','WP0WW6S','W7ZcPSk7W6K','zYFcLCoiW5iOzu/dJsqwW7xdGCoHaSoeW5VdGmkvW7ifcSkbW7Xa','etxcOSk9jq','WRaNemogWPShW4CYW60MW63cN8kGD8kXfsOlB8oyW7NdSqpcKmowW6VcOc4rWRVcG1PDW74OW6K1WRldOmoIW4HeoXTDW5VdPa','hsxcJCk1tehdJmkCCua3rqdcRupcSgG','W7CWECoMqW','4P+UW5tMJPNKVA3NMjhKU7dNKPhLNRVLNjlMLiZMLPZVVBpOTPtOVzBLKytNLRP0amkHW4nGksddHdZcHUs6GoEqTEAWSUs5UEEtPG','dulcVSo6WPBcTmoDWPyR','W77cRHj0W7O','W7FcQXP/W4C','W6hdGmkLWOmh','rHFcKSoXW5C','WQL4WPiYW5W','aYBdRs3cRuVdKmkOn0m0WR8CFcxdNW','WOdcGKj8ia','WRu/W5T2W63dNHO','W5usdITky8k0avZdQYBdQMKdWOVcKuldHmoSW4/cGZy','W70HWQG3dKxcO24LWRFcPq','WOddJMbTWRWt','W7tcRrO','W6VcPSkRW63dKrhcVxpcUqlcTsa','xSoowM3cLq','ASkvtSknsCo6kc4','WOFcJSkpW4K','W7WIpG','W7tdV8kx','W7ada8ovW5tcUmkayHxcK0f3iJdcPSo+sq','W7jBW5e','W6OSW4ZdQqKRAM4UxSo7W4zYW5zpW40v','fentbmkb','WP7cJ8kEW5hcG27dTaW','WOGUu8oIWQy','WR53W69Wu13cPW','WR9hWPJdRXtcHmo2','WRz3W4NcLW4yaSolW7W','WQddS08JWR4JWOldM8kIW5tcTrhdGa','8l2kMSoFW6CzWRhdJ8o8qWJdONJMJBZLJkdLKiVLUPZLVOJLU5CP4PYRca','WOVdNSkjdmoV','ac3dM8kkWOG','W5ldNSkiWOpdMmo9DmowWRfjWQpdIMaQ','8lgOLLrVf8kamIywWOhdGmo06k+A5Rcz6zA/6k2MvUkEQI3OJRFLJy3LIjBMGPdKUPRNKQBLNiZLNPtLPl3OT7hVVzpLTylOROpNVPlOT5lOViVORRxMSBa','jhhcTmkA','W54AW6FdGZi7vfmnvSorW6zzW69ZW7COxM4pW5ZdRG','W6a/nINcT8oxhmkoW4mFW7C','W5hcKYmuW4LJybioW49Qe8kS','W59iqmkvW45AW47cH8oGFCojmLBdVtldU2NdPq','W58BeJPkAmo8','WQ5caCkYjCk5W6NdGLBcNCk2WRlcMG','WRhcThPdaa','vSkZW7lcTCoKwmk1W6ZdUa','W5xdN8o3W4lcI8kApSkY','iv9U','bhJcKmkWWRK','8ygBTCk9W7ZdO8oAWOhcTSkQWOCBk+EVN+wtM+IoQUwoHEwNSUI1Ga','iXZdNWJcNq','W7tdMrbHeW','esdcOq','WQj9W6K','wrVcRq','W5FcHYZcUSo8FSo+W78','WQ1ka8oes8oUWP3dMhq','W4dcLtRcK8o7CSo6W64','mbVcU8kmmZFdT8kTwgCtFZRdKYBcLLpcNgdcSmoeet/cVrvxW4bOWP0nWPa'],...(function(){return['W7PbWPpdQqG','W605W5hcPaXdywnSFSo7W4u','W7G6pGb4wCognhtdHq3dKbKIWQxcVx7dSSohW7JcUHBcG0hcJmkGW4vNWQpdMSoHWPrT','kf5/','WO8qqColWP8gW4u5W7S','cI3cI8k9gsldH8kxCuuX','jdpdJZBcLa','WQzSW5xcKauChW','xSokrg3cJ0pcO2eE','W5zhbCopja','buRcSmk0WPq','W6v+CmkKW6rpW77cVCojx8oR','4P+eW7tcQCoPW5eGWPf0WRujW7SgwSkrWP3dVEARVowDN+wjGUI+GEwLQoI1GbhIN7TG','W79gW4nqWP/cLYVcJxGDWPyn','WQPVW7ZcTsO','lLRcVCk2WQK','k3tcUW','W6vEWPG','W5xdKGm','5yQ75PE5W6ZdPqOizEs7PoErHftdHo++SG','W7WQWPlcN2u','W7LmW5jdWORcKrZcTxGvWP0kvSoBW7ub','WQW/kmoQWQG6W4BcV8ofySo5eW','W5ddLmk/WO8KmSo0FCo5WRdcVmkhWRNdMsiUWPlcIZJcKSkOWRddLLFcTCkO','WQOoW7pdRmot','jWFdIbtcRW','8kAPUmkAxrXKW53cH8ovm8kMW5VLNBRLPR/NKO3MJktLJRJLK4NLURdMLz/PG5ZLI6tKU6BPL6lOR7RdU+kCLSkI','WRepW4bQW68','W75HW7bPWOy','W77cQXf+W6z6W5RdSa','WPymqW','fsVdUJZcQvVdLW','W6ruWOZdSX3cOSo+','W5PXlSo5','8lE5N2NcKCoWz8odW6q5WONcUL/ORPdMS5pLPzROTRD04P+7W6tMLzFLK7NLU5lMLlVMJ48','W43dGmoBW5hcJCkKiConWQH1WOddJL0','ds7cSMu','WPdcN8ouW5NcMG','W4VcMIRcMSoGD8oYW7G','WQqZh0VcRCopxGG/omoxWQRdImooextcSG','WQtdQmkKkSooAXJdVmoxW4NdNMdcItBcTmkkfJS0WQ97WRa','e8oXWRpcKq','WRq1W48','W78vaCo5W57cMmkuEbRcSvP2ja','dv/cG8kQWO5YW4KIWPZcRSozgxldT8o5WRnuW4ldQsv8W7LSW6NcQ8kPdSk3lmoqAwy','W7HDW5vsWOtcNaBcHhim','DN3cMHjmgaHFxq','WRlcTSoXW55dWQrKt1/cImkyWQPO','EIBcQcDkWQiLWR9j','W5/dImkWWO8LiCoQFq','fJdcGW','W7XcWPRdPcJcRmo2W7zB','w03cVHPG','lSknWRHcdCktWRxcP2hcPJpdICkSsq','W54rbG','W68UW49aW7/dRtm','kSksDG','eCojvCopW58','W4i3l8o1W5q','WOpdJCksdq','W4LXm8oyea','hSoRumo+W7tcRJBcT8o5E2pcUNNcO3Sx','W4z7lSo5','WQetW4zvW6y','nqNdRG','Cmk6DmkVEq','dYZcGCkHnaJdHCkCza','W47cK8keW5/dSa','W4SkW63dMrS','B2hcMa','WQO/W5HPW63dMHO','WOtcJSozW6RcNW','WPpdHG3cSCosqCoHW4a','h33cNmogWRq','iCkyzq','ubRcVa','WPVcQSk6W4VcGq'];}())];}())];}());Iii11l=function(){return lI1lli;};return Iii11l();};let redisClient=null;if(redisUrl){let redis=null;try{redis=require(IlIli1(0x16a,'FOBH'));}catch(l1lIiI){console['log'](IlIli1(0x126,'OQ@H')+l1lIiI['message']);}if(redis)try{redisClient=redis[IlIli1(0x127,'(CpV')]({'url':redisUrl});}catch(llliiI){console[IlIli1(0x115,'hi0Y')](IlIli1(0x193,'rg!&')+(llliiI[IlIli1(0x109,'T(3e')]||llliiI));}}async function getToken(IilIiI,i1i1I1,IlII1=!![]){const illIiI=IlIli1,IiI11={'mqWGM':illIiI(0xc0,'xg]f'),'JqPuQ':'🚫\x20getToken\x20在处理请求时遇到了错误','XCAlx':function(liIlI,lll){return liIlI(lll);},'mTwjo':illIiI(0xd6,'XbSR'),'BmViX':function(llli1,iIli1i){return llli1!==iIli1i;},'kjFxE':'uWqGA','yInPj':illIiI(0xe0,'I7[['),'xwCMn':function(iI1lii,IilIii){return iI1lii===IilIii;},'iwuWZ':illIiI(0x129,'7AEE'),'jZqCJ':'.js','rMwMm':illIiI(0xbb,'706l'),'YsZsC':illIiI(0x111,'6a#i'),'PJCxe':illIiI(0x104,'7AEE'),'JrDOi':illIiI(0x167,'!P0O'),'CRebw':illIiI(0x128,'T$Jh'),'AYQKc':function(iI1lil,l1lIi1){return iI1lil===l1lIi1;},'oigdO':illIiI(0x15b,'bUw('),'TQXCh':illIiI(0x145,'vK*9'),'gLGXv':function(iIli1l,i1i1II){return iIli1l||i1i1II;},'eCTZp':'3|4|1|2|0|5','scXpV':illIiI(0x169,'ndMh'),'RPnwU':illIiI(0x11b,'!tn]'),'VWsrY':'application/x-www-form-urlencoded','bUVXm':illIiI(0xde,'FOBH'),'OTclr':illIiI(0x189,'6a#i'),'poitC':illIiI(0xdf,']VBh'),'IKAbx':function(liiIIl,iil1iI){return liiIIl<iil1iI;},'NZLqb':function(IlIllI,il1i1I){return IlIllI>=il1i1I;},'xSXBu':function(lI1li1,iI11II){return lI1li1>=iI11II;},'gaaZq':function(iIII1I,ilil1i){return iIII1I-ilil1i;},'bTnyQ':function(IlIIi,IiI1l){return IlIIi||IiI1l;},'SlAjJ':'DJhIu','Oddia':illIiI(0x13c,'9fVf'),'iUhoc':function(illlII,iIII11){return illlII===iIII11;},'CcLSd':'BnQcd','iURge':function(IiI1i,llll1){return IiI1i+llll1;},'lKGvw':function(lil11l,i1i1Il){return lil11l===i1i1Il;},'IrDUr':illIiI(0x17a,')A!n'),'SWmVR':function(I1lIl1,lil11i){return I1lIl1>=lil11i;}};let lli='';try{const IlIIl=IiI11[illIiI(0x179,'xg]f')](decodeURIComponent,common[illIiI(0x14f,'o4Rf')](IilIiI,IiI11[illIiI(0xc8,'XbSR')]));if(IlIIl){if(IiI11[illIiI(0x196,'hi0Y')](IiI11[illIiI(0xdd,']VBh')],IiI11[illIiI(0x159,'KMeY')])){if(!scriptName){if(IiI11[illIiI(0x16b,'srNs')](IiI11[illIiI(0x186,'(#1n')],illIiI(0x15d,'OQ@H')))liIiI[illIiI(0x184,'HclO')](l1il1I);else{const iil1i1=require[illIiI(0x155,'^L]6')][illIiI(0x137,'E$LL')];scriptName=path[illIiI(0x118,'9fVf')](iil1i1,IiI11[illIiI(0x153,'Y)6!')]);}}if(IlII1){let il1i11=[];if(i1i1I1[illIiI(0xc3,'rg!&')]('lzkj')){if(scriptName[illIiI(0xbf,'4@uR')](illIiI(0xcb,'Stn4')))il1i11=lzkjPinFilter_interaction_v2;else scriptName[illIiI(0x170,'(#1n')](IiI11[illIiI(0xfa,'FOBH')])?IiI11[illIiI(0x120,'6a#i')](illIiI(0xc7,'vK*9'),IiI11[illIiI(0xf8,'BCRj')])?Iliili=Iliill[illIiI(0xef,'OQ@H')]({'url':IIII11}):il1i11=lzkjPinFilter_interactsaas_and_interaction_v1:il1i11=lzkjPinFilter;}else i1i1I1[illIiI(0x140,'9fVf')](IiI11[illIiI(0x101,'NAcT')])&&(il1i11=cjhyPinFilter);if(il1i11[illIiI(0xd9,'o4Rf')]>0x0&&(il1i11[illIiI(0xf1,'bUw(')](IlIIl)||il1i11[illIiI(0xf9,'XbSR')](IiI11[illIiI(0x14e,'706l')](encodeURIComponent,IlIIl))))return console[illIiI(0xee,'E$LL')](IiI11[illIiI(0xc2,'!tn]')]),'';lli=cacheFile[illIiI(0x164,'AdM#')](IlIIl)||'';if(lli){if(illIiI(0x15e,'!tn]')!==illIiI(0xe5,'!P0O'))return lli;else l1l11i[illIiI(0xd4,'lET]')]=null,l1iIl[illIiI(0xd0,'6a#i')]=null,illIll['extractTimestamp']=null,iIli1I[illIiI(0x11e,'FOBH')]=0x0;}if(redisClient){try{illIiI(0xb9,'rg!&')===IiI11[illIiI(0x16e,'bUw(')]?await redisClient[illIiI(0x121,'T$Jh')]():Illl1i=lIIiil;}catch{}try{const illlIi=encodeURIComponent(hasRedisKey?redisKey[illIiI(0xcd,'c!&d')](/<pt_pin>/g,IlIIl):''+redisKey+IlIIl);lli=await redisClient[illIiI(0xbd,'#U)B')](illlIi);if(lli)return IiI11[illIiI(0x10b,'c!&d')](IiI11['oigdO'],IiI11[illIiI(0xe4,'E$LL')])?lli:(IllIII[illIiI(0x144,'KMeY')](IiI11['mqWGM']),'');}catch(IiI1I){console[illIiI(0x115,'hi0Y')]('🚫\x20getToken\x20Redis缓存异常\x20➜\x20'+(IiI1I['message']||IiI1I));}}}}else IIlil=ilI1lI;}const lI1liI=await common[illIiI(0x19d,'6a#i')](IiI11[illIiI(0x154,'vK*9')],{'url':i1i1I1,'id':''});if(!lI1liI)return console[illIiI(0x152,'AdM#')](illIiI(0x110,'Xwe1')),'';let i1i1Ii=null,lllii=![];if(IiI11[illIiI(0x163,'94Fu')](requestAxiosProxyConfig,requestDynamicProxyConfig)){if(requestAxiosProxyConfig)i1i1Ii=requestAxiosProxyConfig;else{if(requestDynamicProxyConfig){if(requestDynamicProxyConfig[illIiI(0xc6,'ndMh')])i1i1Ii=requestDynamicProxyConfig[illIiI(0x11f,']VBh')],lllii=!![];else{const i11ill=await common[illIiI(0xb7,'xg]f')](requestDynamicProxyConfig['api']),IIIIIi=common[illIiI(0x181,'xg]f')](i11ill);if(IIIIIi){if(IiI11[illIiI(0x16f,'9fVf')]('dBGDH',illIiI(0x124,'7AEE'))){const IIIIIl=IiI11[illIiI(0x183,'AdM#')][illIiI(0x11a,'TVry')]('|');let I1lIil=0x0;while(!![]){switch(IIIIIl[I1lIil++]){case'0':console[illIiI(0xf3,'xg]f')](illIiI(0x12d,'!tn]')+IIIIIi[illIiI(0x158,'rg!&')]+':'+IIIIIi[illIiI(0xf2,'XbSR')]);continue;case'1':requestDynamicProxyConfig[illIiI(0x125,'XNOt')]=IIIIIi;continue;case'2':i1i1Ii=IIIIIi;continue;case'3':requestDynamicProxyConfig[illIiI(0x12f,'(CpV')]=Date[illIiI(0x114,'4@uR')]();continue;case'4':requestDynamicProxyConfig[illIiI(0x15c,']VBh')]=0x0;continue;case'5':lllii=!![];continue;}break;}}else return l1llII[illIiI(0x138,'FOBH')](IiI11['JqPuQ']),IilIll[illIiI(0x12b,'TVry')](lI11Ii),Iiill;}else{if(!requestDynamicProxyConfig[illIiI(0xf7,'!tn]')])return console['log'](illIiI(0x103,'Stn4')),'';}}}}}const iI11Ii={'url':'https://api.m.jd.com/client.action?functionId=isvObfuscator','method':IiI11[illIiI(0xe6,'hi0Y')],'headers':{'Host':IiI11[illIiI(0x132,'Xwe1')],'Content-Type':IiI11['VWsrY'],'User-Agent':common[illIiI(0x156,'rg!&')](IlIIl)||IiI11[illIiI(0x136,'(CpV')],'Accept-Language':IiI11[illIiI(0x18d,'!P0O')],'Accept-Encoding':IiI11[illIiI(0xe9,'c!&d')],'J-E-H':common['getJEH'](),'J-E-C':common[illIiI(0xed,'3uz8')](IlIIl),'Cookie':IilIiI},'proxy':i1i1Ii,'data':lI1liI,'debug':![],'timeout':0xea60},iIII1l=0x2;let lllil=0x0,iI11Il=null;while(IiI11[illIiI(0x17e,'AdM#')](lllil,iIII1l)){const liiII1=await common[illIiI(0xfb,'4@uR')](iI11Ii);if(lllii){requestDynamicProxyConfig[illIiI(0x175,'NAcT')]=Date[illIiI(0xf6,'(CpV')](),requestDynamicProxyConfig[illIiI(0xe2,'94Fu')]++;const IIIl1l=requestDynamicProxyConfig[illIiI(0xbe,'XNOt')]>0x0&&IiI11['NZLqb'](requestDynamicProxyConfig[illIiI(0x148,'706l')],requestDynamicProxyConfig[illIiI(0x116,'9fVf')]),lllll=requestDynamicProxyConfig['timeLimit']>0x0&&IiI11[illIiI(0x123,'rg!&')](IiI11[illIiI(0x161,'(#1n')](Date[illIiI(0x12c,'Stn4')](),requestDynamicProxyConfig[illIiI(0xe8,'6a#i')]),requestDynamicProxyConfig[illIiI(0xcf,'Xwe1')]);IiI11[illIiI(0x191,'7AEE')](IIIl1l,lllll)&&(IiI11[illIiI(0x192,'AdM#')]===IiI11['SlAjJ']?(requestDynamicProxyConfig[illIiI(0x106,'xg]f')]=null,requestDynamicProxyConfig[illIiI(0x17b,'XNOt')]=null,requestDynamicProxyConfig[illIiI(0x157,'Y)6!')]=null,requestDynamicProxyConfig[illIiI(0x14d,'TVry')]=0x0):iIIl1i[illIiI(0x10e,'BCRj')](illIiI(0xc1,'!P0O')+I1lllI[illIiI(0xd5,'srNs')]));}if(!liiII1[illIiI(0x139,'6a#i')]){iI11Il='❌\x20getToken\x20请求失败\x20➜\x20'+liiII1[illIiI(0x100,'^L]6')],lllil++;continue;}if(!liiII1['data']){iI11Il=IiI11[illIiI(0x112,'Stn4')],lllil++;continue;}try{if(IiI11[illIiI(0x135,'KMeY')]('Wvxea',illIiI(0xc5,'4@uR'))){const iil1l1=liiII1['data'];if(iil1l1['code']==='0'){if(IiI11[illIiI(0x133,'6a#i')](IiI11[illIiI(0x12e,'HclO')],IiI11[illIiI(0x10f,'7AEE')])){lli=iil1l1[illIiI(0xe7,'#U)B')],cacheFile['put'](IlIIl,lli,cacheDefaultTTL);if(redisClient&&redisSubmit){try{await redisClient[illIiI(0x18b,'!tn]')]();}catch{}const lllli=encodeURIComponent(hasRedisKey?redisKey[illIiI(0x160,'KMeY')](/<pt_pin>/g,IlIIl):''+redisKey+IlIIl),iiili1=lli,ill11i=Math[illIiI(0xe3,'E$LL')](IiI11['iURge'](Date[illIiI(0xf4,'7UC)')](),cacheDefaultTTL)/0x3e8);try{await redisClient['set'](lllli,iiili1),await redisClient[illIiI(0x14b,'7UC)')](lllli,ill11i);}catch(lllill){console[illIiI(0x15f,'706l')]('🚫\x20getToken\x20Redis缓存失败\x20➜\x20'+(lllill['message']||lllill));}}}else l1l11I[illIiI(0xca,'^L]6')](illIiI(0xff,'TVry')+lilIl[illIiI(0xfd,'T$Jh')](IilIlI));}else IiI11[illIiI(0xd8,'TVry')](iil1l1['code'],'3')&&IiI11[illIiI(0x166,'XbSR')](iil1l1[illIiI(0x198,'BEnK')],0x108)?console['log'](IiI11['IrDUr']):console[illIiI(0x113,'srNs')](illIiI(0x18c,'&Z&t')+JSON[illIiI(0x122,'A2ri')](iil1l1));}else iiilll['log']('🚫\x20getToken\x20Redis缓存失败\x20➜\x20'+(lI11Il[illIiI(0xea,'KMeY')]||lIII1i));}catch(lllili){console[illIiI(0x14c,']VBh')](illIiI(0x134,')A!n')+(lllili[illIiI(0x13a,'TVry')]||lllili));}break;}return IiI11['SWmVR'](lllil,iIII1l)&&console[illIiI(0xce,'Y)6!')](iI11Il),lli;}catch(IliiiI){return console['log'](IiI11[illIiI(0xcc,'Xwe1')]),console[illIiI(0x19c,'o4Rf')](IliiiI),lli;}finally{if(redisClient)try{await redisClient[illIiI(0x147,'(CpV')]();}catch{}}}module[IlIli1(0xc4,'6a#i')]=getToken;var version_ = 'jsjiami.com.v7';