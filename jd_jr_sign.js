/*
京东金融双签

大概率需要开启代理，否则黑IP

cron:1 1 1 1 *

*/

const $ = new Env('京东金融双签')
var iｉl='jsjiami.com.v7';const llllI=iii1II;(function(iil1l1,lllli,iiili1,ill11i,lllill,ill11l,I1lIiI){return iil1l1=iil1l1>>0x9,ill11l='hs',I1lIiI='hs',function(lllili,IliiiI,Ill11,liiIII,li1i11){const ii1ii1=iii1II;liiIII='tfi',ill11l=liiIII+ill11l,li1i11='up',I1lIiI+=li1i11,ill11l=Ill11(ill11l),I1lIiI=Ill11(I1lIiI),Ill11=0x0;const iI11I1=lllili();while(!![]&&--ill11i+IliiiI){try{liiIII=parseInt(ii1ii1(0x214,'fVtH'))/0x1*(-parseInt(ii1ii1(0x208,'5KPb'))/0x2)+-parseInt(ii1ii1(0x175,'U4[$'))/0x3*(parseInt(ii1ii1(0x243,'CZ[!'))/0x4)+parseInt(ii1ii1(0x16a,'&bpi'))/0x5+parseInt(ii1ii1(0x1eb,'Ua7G'))/0x6+-parseInt(ii1ii1(0x14e,'t]ni'))/0x7*(-parseInt(ii1ii1(0x1c3,'YH5H'))/0x8)+-parseInt(ii1ii1(0x1a5,'KS9r'))/0x9+parseInt(ii1ii1(0x13a,'ZImH'))/0xa*(-parseInt(ii1ii1(0x148,'Cnri'))/0xb);}catch(il1i1l){liiIII=Ill11;}finally{li1i11=iI11I1[ill11l]();if(iil1l1<=ill11i)Ill11?lllill?liiIII=li1i11:lllill=li1i11:Ill11=li1i11;else{if(Ill11==lllill['replace'](/[BnfGlYDQLTwPRdAgxVrN=]/g,'')){if(liiIII===IliiiI){iI11I1['un'+ill11l](li1i11);break;}iI11I1[I1lIiI](li1i11);}}}}}(iiili1,lllli,function(IlIlll,IIIl1I,iil1ii,IlIlli,il1i1i,lil111,i11ilI){return IIIl1I='\x73\x70\x6c\x69\x74',IlIlll=arguments[0x0],IlIlll=IlIlll[IIIl1I](''),iil1ii=`\x72\x65\x76\x65\x72\x73\x65`,IlIlll=IlIlll[iil1ii]('\x76'),IlIlli=`\x6a\x6f\x69\x6e`,(0x15288f,IlIlll[IlIlli](''));});}(0x19200,0xde1ce,Iii11l,0xcb),Iii11l)&&(iｉl=0xcb);const illIli=require(llllI(0x23e,'x@F@')),l11i1l=require('./utils/Rebels_sendJDNotify'),lIII11=require('./utils/Rebels_jdCommon'),IiilI=$[llllI(0x1d1,'l7Ht')]()?require(llllI(0x1fb,'HffB')):'',ii1I11=![],liIi1=llllI(0x233,'Wlvr'),lI11II=llllI(0x224,'rhY2'),l1llI1=llllI(0x24d,'ZpmI')+IllI1l(0x6f,lI11II+liIi1)[llllI(0x1d2,'Du(C')]();let llIIll='';const IillIi=Object[llllI(0x1e0,'eY$(')](illIli)[llllI(0x236,'Wlvr')](i11I1i=>illIli[i11I1i])[llllI(0x1a9,'VmOX')](IillIl=>IillIl);!IillIi[0x0]&&($[llllI(0x1b1,'2xC@')]($['name'],'【提示】请先获取Cookie'),process[llllI(0x1e4,'@4S6')](0x1));function iii1II(_0x1fb322,_0xca447c){const _0x3818a8=Iii11l();return iii1II=function(_0x228f31,_0x3cb933){_0x228f31=_0x228f31-0x137;let _0x444f1c=_0x3818a8[_0x228f31];if(iii1II['eEJZXq']===undefined){var _0x3e5a79=function(_0x2b194e){const _0x5361a2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5db7b2='',_0x1f8459='';for(let _0x3edbc5=0x0,_0x4be9d3,_0x59c8f7,_0x284c2f=0x0;_0x59c8f7=_0x2b194e['charAt'](_0x284c2f++);~_0x59c8f7&&(_0x4be9d3=_0x3edbc5%0x4?_0x4be9d3*0x40+_0x59c8f7:_0x59c8f7,_0x3edbc5++%0x4)?_0x5db7b2+=String['fromCharCode'](0xff&_0x4be9d3>>(-0x2*_0x3edbc5&0x6)):0x0){_0x59c8f7=_0x5361a2['indexOf'](_0x59c8f7);}for(let _0x1cb048=0x0,_0x100d6b=_0x5db7b2['length'];_0x1cb048<_0x100d6b;_0x1cb048++){_0x1f8459+='%'+('00'+_0x5db7b2['charCodeAt'](_0x1cb048)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1f8459);};const _0x518de6=function(_0x4ddcf5,_0x51e5c7){let _0x34f5c0=[],_0x20f930=0x0,_0x2690f9,_0x414825='';_0x4ddcf5=_0x3e5a79(_0x4ddcf5);let _0x4d338b;for(_0x4d338b=0x0;_0x4d338b<0x100;_0x4d338b++){_0x34f5c0[_0x4d338b]=_0x4d338b;}for(_0x4d338b=0x0;_0x4d338b<0x100;_0x4d338b++){_0x20f930=(_0x20f930+_0x34f5c0[_0x4d338b]+_0x51e5c7['charCodeAt'](_0x4d338b%_0x51e5c7['length']))%0x100,_0x2690f9=_0x34f5c0[_0x4d338b],_0x34f5c0[_0x4d338b]=_0x34f5c0[_0x20f930],_0x34f5c0[_0x20f930]=_0x2690f9;}_0x4d338b=0x0,_0x20f930=0x0;for(let _0x134924=0x0;_0x134924<_0x4ddcf5['length'];_0x134924++){_0x4d338b=(_0x4d338b+0x1)%0x100,_0x20f930=(_0x20f930+_0x34f5c0[_0x4d338b])%0x100,_0x2690f9=_0x34f5c0[_0x4d338b],_0x34f5c0[_0x4d338b]=_0x34f5c0[_0x20f930],_0x34f5c0[_0x20f930]=_0x2690f9,_0x414825+=String['fromCharCode'](_0x4ddcf5['charCodeAt'](_0x134924)^_0x34f5c0[(_0x34f5c0[_0x4d338b]+_0x34f5c0[_0x20f930])%0x100]);}return _0x414825;};iii1II['KOebNM']=_0x518de6,_0x1fb322=arguments,iii1II['eEJZXq']=!![];}const _0x3dc929=_0x3818a8[0x0],_0x32e75c=_0x228f31+_0x3dc929,_0x16582d=_0x1fb322[_0x32e75c];return!_0x16582d?(iii1II['NnTICd']===undefined&&(iii1II['NnTICd']=!![]),_0x444f1c=iii1II['KOebNM'](_0x444f1c,_0x3cb933),_0x1fb322[_0x32e75c]=_0x444f1c):_0x444f1c=_0x16582d,_0x444f1c;},iii1II(_0x1fb322,_0xca447c);}!(async()=>{const lllil1=llllI,llliil={'xdMdY':lllil1(0x1c1,'CIlK'),'tSivt':lllil1(0x154,'Cnri'),'sBgHI':lllil1(0x20d,'HPmp'),'FQwRY':function(liIl1){return liIl1();},'wuFvr':function(II1lll,II1lli){return II1lll!==II1lli;},'QuFQW':lllil1(0x18c,'nEZg'),'WPsUP':'rWtWj','TtcIs':function(ii1I1I,IiIl){return ii1I1I<IiIl;},'HPUYT':function(IiIi,iI1ll1){return IiIi!==iI1ll1;},'hfafH':lllil1(0x20e,'ZpmI'),'mEMQV':lllil1(0x1d8,'eY$('),'HlNxL':function(IlI1Il,l1il1l){return IlI1Il+l1il1l;}};$[lllil1(0x1c7,'nEZg')]=0x0,console['log'](llliil[lllil1(0x21b,'l7Ht')]),await llliil[lllil1(0x1d3,'x@F@')](lil);if(!$[lllil1(0x143,'ZpmI')]){if(llliil[lllil1(0x19b,'2K%@')](llliil[lllil1(0x1f8,'2K%@')],llliil[lllil1(0x1dd,'%0Vu')])){if(llliil[lllil1(0x230,'$k%n')]($[lllil1(0x258,'fVtH')],0x3)){if(llliil[lllil1(0x1af,'m%jo')](lllil1(0x213,'Wlvr'),llliil[lllil1(0x228,'aE!6')]))$['retry']++,console['log'](lllil1(0x19e,'VmOX')),await $[lllil1(0x1de,'t]ni')](0x1388),await llliil[lllil1(0x14c,'ZpmI')](lil);else{IiilI1[lllil1(0x1ea,'nEZg')](llliil[lllil1(0x231,'nEZg')]);return;}}}else Iliiil?.[lllil1(0x1bd,'2xC@')]?.[lllil1(0x14f,'Ua7G')]?.[lllil1(0x248,'#bqM')]?.[lllil1(0x14d,'nEZg')]==llliil['tSivt']?i1IIl[lllil1(0x1a6,'Cnri')]('双签成功，获得：'+I1lll1?.['resultData']?.[lllil1(0x218,'rhY2')]?.[lllil1(0x1c9,'HPmp')]?.[lllil1(0x141,'8Uol')]?.[lllil1(0x1a2,'aE!6')][0x0][lllil1(0x169,'!mcA')]):i1IIi[lllil1(0x197,'ZpmI')](lllil1(0x22f,'M^YV')+IIII1I?.[lllil1(0x137,'5KPb')]?.['result']?.[lllil1(0x17a,'l7Ht')]?.['businessMsg']);}if(!$[lllil1(0x23f,'FE(7')]){console['log'](lllil1(0x194,'!z1T'));return;}l11i1l['config']({'title':$[lllil1(0x1e6,'[*qa')]});for(let liIii=0x0;llliil['TtcIs'](liIii,IillIi[lllil1(0x16c,'x@F@')]);liIii++){$['index']=liIii+0x1,llIIll=IillIi[liIii],lIII11[lllil1(0x167,'YH5H')](llIIll),$['UserName']=decodeURIComponent(lIII11[lllil1(0x160,'m%jo')](llIIll,llliil[lllil1(0x225,'YE^W')])),$['UA']=lIII11['genUA']($[lllil1(0x23b,'@4S6')]),$[lllil1(0x235,'KS9r')]=l11i1l['create']($['index'],$['UserName']),$['nickName']='',console[lllil1(0x22a,'HPmp')](lllil1(0x158,'Ua7G')+$[lllil1(0x251,'$k%n')]+'】'+($[lllil1(0x244,'!z1T')]||$['UserName'])+lllil1(0x1dc,'aE!6')),await lii(),lIII11['unsetCookie']();if($['runEnd'])break;await $[lllil1(0x1cb,'k8j7')](0x3e8);}ii1I11&&l11i1l[lllil1(0x1e5,'nEZg')]()&&(l11i1l[lllil1(0x207,'CIlK')](llliil['HlNxL'](l11i1l[lllil1(0x221,'rhY2')],'\x0a医药馆签到')),await l11i1l['push']());})()[llllI(0x150,'%0Vu')](II1ll1=>$[llllI(0x177,'5KPb')](II1ll1))['finally'](()=>$[llllI(0x144,'2K%@')]());async function lii(){const iil1il=llllI,IlI1Ii={'IYhlE':iil1il(0x25a,'aE!6'),'pRDGv':function(l1il1i,ll1){return l1il1i(ll1);},'mUjWv':iil1il(0x209,'ZpmI'),'HuaZX':function(iI1llI,llliii){return iI1llI!==llliii;},'npmhS':iil1il(0x238,'xQ3M'),'BShoZ':iil1il(0x21c,'l7Ht')},i11I1I=await lIII11[iil1il(0x203,'ZpmI')](llIIll);if(!i11I1I&&typeof i11I1I===IlI1Ii['IYhlE']){console['log'](iil1il(0x1a0,'ZImH'));return;}try{$[iil1il(0x13d,'HPmp')]=![];if(!$[iil1il(0x170,'1e%K')])return;await IlI1Ii[iil1il(0x171,'m%jo')](i11I1l,IlI1Ii['mUjWv']),!$[iil1il(0x1cc,'M^YV')]&&(IlI1Ii['HuaZX'](IlI1Ii['npmhS'],IlI1Ii['npmhS'])?(i1ill1[iil1il(0x142,'CZ[!')]=!![],iIIl1l[iil1il(0x164,'eY$(')]('金融签到失败，原因：'+llIli1?.[iil1il(0x19a,'XA5a')])):(await $['wait'](0x1f4),await i11I1l(IlI1Ii['BShoZ'])));}catch(l1llIi){console[iil1il(0x240,'CZ[!')](l1llIi[iil1il(0x217,'Cnri')]);}}async function IllI1i(II1llI,i11I11){const ilil1I=llllI,l1llIl={'EUinX':ilil1I(0x14a,'Wlvr'),'rTUFZ':function(ii1I1l,ii1I1i){return ii1I1l===ii1I1i;},'eODFS':'jEvBK','DslSw':ilil1I(0x147,'2K%@'),'iwDjN':ilil1I(0x161,'FE(7'),'zLVhF':ilil1I(0x13e,'Im!X'),'LZJFM':ilil1I(0x1c4,'2xC@'),'SbrWi':ilil1I(0x1b6,'FE(7'),'zLRrl':function(llI,llliI){return llI===llliI;},'UfuDy':function(iI1li1,lllii1){return iI1li1!==lllii1;},'RwuTH':'jfIzZ','UCAxR':function(liIli,liIll){return liIli==liIll;},'UAFdF':ilil1I(0x1df,'xQ3M'),'KVuaw':ilil1I(0x174,'nEZg'),'Trtwn':'AQWzz'};try{switch(II1llI){case l1llIl['EUinX']:if(i11I11?.[ilil1I(0x1b0,'fVtH')]&&l1llIl[ilil1I(0x21e,'&bpi')](i11I11?.[ilil1I(0x16e,'1e%K')],0x0))l1llIl[ilil1I(0x1e8,'Du(C')](l1llIl[ilil1I(0x252,'aE!6')],l1llIl[ilil1I(0x24a,'xQ3M')])?(I1i11i['outFlag']=!![],I1i11l[ilil1I(0x211,'!z1T')]&&IIlil[ilil1I(0x179,'Ua7G')]['fix'](ilI1lI)):i11I11?.['resultData']?.[ilil1I(0x180,'FE(7')]==0x0?console['log'](ilil1I(0x19d,'6b(q')+(i11I11?.[ilil1I(0x1a7,'YE^W')]?.[ilil1I(0x22c,'Ua7G')]?.['baseReward']||0x0)+'金贴'):l1llIl[ilil1I(0x15a,'2aPR')]===l1llIl[ilil1I(0x259,'HPmp')]?I1iIiI[ilil1I(0x1ab,'2K%@')]=![]:($['hot']=!![],console[ilil1I(0x155,'Du(C')](ilil1I(0x1be,'$%Y%')+i11I11?.['resultData']?.[ilil1I(0x178,'Cnri')]),i11I11?.['resultData']?.[ilil1I(0x1a4,'#bqM')]['includes'](l1llIl[ilil1I(0x1ee,'%0Vu')])&&($['hot']=![]));else i11I11?.[ilil1I(0x173,'VmOX')]==0x3?($[ilil1I(0x166,'CIlK')]=!![],console[ilil1I(0x19c,'fVtH')](ilil1I(0x20c,'rhY2')+i11I11?.[ilil1I(0x1f6,'!z1T')])):ilil1I(0x146,'k8j7')===ilil1I(0x20b,'8Uol')?(iliII1[ilil1I(0x18f,'Cnri')]=!![],II11I1[ilil1I(0x1ce,'U4[$')](ilil1I(0x1f2,'#bqM')+Iii11I?.['resultMsg'])):($[ilil1I(0x182,'FE(7')]=!![],console['log']('金融签到失败，原因：'+i11I11?.[ilil1I(0x196,'$%Y%')]));break;case l1llIl[ilil1I(0x1fa,'1e%K')]:if(i11I11?.['resultData']&&i11I11?.[ilil1I(0x226,'2K%@')]===0x0)l1llIl['zLRrl'](ilil1I(0x253,'xQ3M'),ilil1I(0x17d,'U4[$'))?(delete I1lliI[ilil1I(0x1bc,'&bpi')],delete llIllI[ilil1I(0x16f,'Im!X')]['Content-Type']):i11I11?.['resultData']?.['result']?.[ilil1I(0x183,'!z1T')]?.[ilil1I(0x1a3,'m%jo')]==ilil1I(0x1a8,'6b(q')?console[ilil1I(0x247,'!Y!m')]('双签成功，获得：'+i11I11?.[ilil1I(0x23d,'#bqM')]?.[ilil1I(0x218,'rhY2')]?.['businessData']?.['businessData']?.[ilil1I(0x16b,'HffB')][0x0]['name']):l1llIl[ilil1I(0x1bf,'$k%n')](ilil1I(0x140,'Cnri'),l1llIl[ilil1I(0x212,'HffB')])?(IIli1['log'](II1liI),IlI1i1&&(llIll1['outFlag']=!![],Illl1l['message']&&l1lIii['message']['fix'](I11iI1))):console[ilil1I(0x1bb,'#bqM')]('双签失败，原因：'+i11I11?.[ilil1I(0x1a7,'YE^W')]?.[ilil1I(0x255,'fVtH')]?.[ilil1I(0x138,'YH5H')]?.[ilil1I(0x242,'fVtH')]);else l1llIl[ilil1I(0x1b5,'CZ[!')](i11I11?.[ilil1I(0x22d,'xQ3M')],0x3)?l1llIl[ilil1I(0x1ca,'!z1T')](l1llIl[ilil1I(0x23a,'vy*H')],l1llIl[ilil1I(0x189,'Wlvr')])?II11Ii['log'](II11Il[ilil1I(0x15e,'rhY2')]):($[ilil1I(0x24c,'1e%K')]=!![],console['log']('双签失败，原因：'+i11I11?.[ilil1I(0x1b7,'$k%n')])):($[ilil1I(0x156,'2xC@')]=!![],console[ilil1I(0x1f7,'@4S6')](ilil1I(0x17b,'eY$(')+i11I11?.[ilil1I(0x1b7,'$k%n')]));break;}}catch(IlII1){ilil1I(0x1b3,'FE(7')!==l1llIl['Trtwn']?lI1Ili[ilil1I(0x22a,'HPmp')](ilil1I(0x190,'5KPb')+IliilI+'\x20请求响应\x20'+(i1II1[ilil1I(0x157,'@4S6')]||iIIl11)):console['log']('❌\x20未能正确处理\x20'+II1llI+ilil1I(0x139,'$%Y%')+(IlII1['message']||IlII1));}}async function i11I1l(lli){const i11il1=llllI,liIlI={'YXvXq':function(i1i1II,liiIIl){return i1i1II==liiIIl;},'ZXIFp':'POST','oPYfb':i11il1(0x15d,'Ua7G'),'hHYie':i11il1(0x1ae,'nEZg'),'WmVvu':i11il1(0x151,'aE!6'),'VJXcx':'shuangqian','GqQFX':function(iil1iI,IlIllI){return iil1iI(IlIllI);},'JLmBa':'jrSign2','KiigQ':i11il1(0x1e9,'FE(7'),'kfEZL':i11il1(0x185,'#bqM'),'uUzZk':i11il1(0x1f4,'CIlK'),'ZhipQ':i11il1(0x202,'YE^W'),'HPfuy':i11il1(0x16d,'xQ3M'),'FlelL':'com.jd.jrapp','zHCBB':i11il1(0x1e7,'Du(C'),'WXKgJ':i11il1(0x1b9,'XA5a'),'crZVR':i11il1(0x1da,'2xC@'),'tsdLd':'GET','nRAEF':i11il1(0x1c5,'l7Ht'),'avoTU':function(il1i1I,lI1li1){return il1i1I<lI1li1;},'YHmjf':function(iI11II,iIII1I){return iI11II===iIII1I;},'WgAsy':i11il1(0x18b,'t]ni'),'REkmS':function(ilil1i,IlIIi){return ilil1i>IlIIi;},'zYsNE':function(IiI1l,illlII){return IiI1l>=illlII;}};if($[i11il1(0x254,'Cnri')]||$['outFlag'])return;let lll='',llli1={},iIli1i=liIlI[i11il1(0x201,'vy*H')];switch(lli){case liIlI[i11il1(0x223,'S#jf')]:const iIII11={'channelSource':'JRAPP6.0','clientType':i11il1(0x232,'6b(q'),'arrEncrypt':!![],'site':liIlI[i11il1(0x1d0,'S#jf')],'videoId':liIlI['WmVvu'],'deviceInfo':{},'riskDeviceParam':JSON[i11il1(0x14b,'xQ3M')]({'eid':$[i11il1(0x15c,'M^YV')][i11il1(0x159,'VmOX')],'fp':$[i11il1(0x18d,'t]ni')]['fp'],'sdkToken':$[i11il1(0x1a1,'l7Ht')][i11il1(0x206,'FE(7')]||l1llI1,'token':$[i11il1(0x1d6,'5KPb')][i11il1(0x163,'8Uol')],'jstub':$[i11il1(0x1f1,'%0Vu')]['jstub']})};nonce=$[i11il1(0x210,'m%jo')][i11il1(0x153,'YE^W')](),signArr=$[i11il1(0x249,'[*qa')][i11il1(0x239,'1e%K')](JSON[i11il1(0x1fe,'fVtH')](iIII11),nonce),bodystr={...iIII11,'adInfo':{},'signData':JSON['stringify'](iIII11),'signature':signArr,'nonce':nonce,'channelLv':liIlI[i11il1(0x145,'2aPR')]},llli1=i11il1(0x186,'$%Y%')+liIlI[i11il1(0x195,'%0Vu')](encodeURIComponent,JSON[i11il1(0x1fc,'aE!6')](bodystr)),lll=i11il1(0x13b,'CZ[!');break;case liIlI['JLmBa']:bodystr={'actCode':'F68B2C3E71','type':0x3,'frontParam':{'belong':liIlI[i11il1(0x22e,'fVtH')]},'riskDeviceParam':liIlI['kfEZL']},llli1=i11il1(0x257,'!mcA')+encodeURIComponent(JSON[i11il1(0x168,'nEZg')](bodystr)),lll=i11il1(0x216,'FE(7');break;default:console[i11il1(0x20f,'ZImH')]('❌\x20未知请求\x20'+lli);return;}const iI1lii={'url':lll,'method':iIli1i,'headers':{'Host':liIlI[i11il1(0x17f,'YH5H')],'Connection':'keep-alive','Accept':i11il1(0x199,'#bqM'),'User-Agent':liIlI[i11il1(0x1b2,'HffB')],'Content-Type':i11il1(0x19f,'8Uol'),'Origin':liIlI[i11il1(0x24b,'XA5a')],'X-Requested-With':liIlI[i11il1(0x1db,'M^YV')],'Referer':liIlI[i11il1(0x1fd,'Wlvr')],'Accept-Encoding':liIlI[i11il1(0x17e,'2xC@')],'Accept-Language':liIlI[i11il1(0x234,'YE^W')],'cookie':llIIll},'body':llli1,'timeout':0x7530};iIli1i===liIlI['tsdLd']&&(delete iI1lii[i11il1(0x1ac,'Du(C')],delete iI1lii[i11il1(0x21d,'HPmp')][liIlI[i11il1(0x1c2,'Du(C')]]);const IilIii=0x1;let iI1lil=0x0,l1lIi1=null,iIli1l=![];while(liIlI[i11il1(0x237,'U4[$')](iI1lil,IilIii)){if(liIlI[i11il1(0x198,'CZ[!')](liIlI['WgAsy'],liIlI[i11il1(0x245,'WUCG')])){if(liIlI[i11il1(0x220,'$%Y%')](iI1lil,0x0)){if(liIlI[i11il1(0x172,'xQ3M')](i11il1(0x23c,'M^YV'),'gwoqp'))await $[i11il1(0x1ff,'x@F@')](0x3e8);else{i1ili1[i11il1(0x1f0,'1e%K')](i11il1(0x1cd,'xQ3M'));return;}}const IiI1i=await lIII11[i11il1(0x149,'8Uol')](iI1lii);if(!IiI1i[i11il1(0x24f,'KS9r')]){if(liIlI['YHmjf'](i11il1(0x187,'Cnri'),i11il1(0x250,'KS9r')))liIlI[i11il1(0x246,'fVtH')](I1iIl1?.['resultData']?.[i11il1(0x1e2,'S#jf')],0x0)?li1II[i11il1(0x227,'KS9r')](i11il1(0x1c6,'fVtH')+(IliI11?.['resultData']?.[i11il1(0x21a,'nEZg')]?.[i11il1(0x176,'!mcA')]||0x0)+'金贴'):(i1ll[i11il1(0x20a,'XA5a')]=!![],i1l1lI[i11il1(0x155,'Du(C')](i11il1(0x162,'%0Vu')+i1iliI?.[i11il1(0x18a,'8Uol')]?.[i11il1(0x1f3,'5KPb')]),I1iIii?.[i11il1(0x165,'2K%@')]?.['resBusiMsg'][i11il1(0x188,'rhY2')](i11il1(0x229,'$k%n'))&&(I1iIil[i11il1(0x193,'8Uol')]=![]));else{l1lIi1=i11il1(0x1cf,'aE!6')+lli+i11il1(0x1ad,'2aPR')+IiI1i['error'],iI1lil++;continue;}}if(!IiI1i?.[i11il1(0x241,'t]ni')]){l1lIi1=i11il1(0x181,'YE^W')+lli+i11il1(0x13c,'XA5a'),iI1lil++;continue;}IllI1i(lli,IiI1i['data']),iIli1l=![];break;}else Iil1I1[i11il1(0x19c,'fVtH')](i11il1(0x13f,'6b(q')+Ii1iII?.[i11il1(0x256,'S#jf')]?.[i11il1(0x1b4,'KS9r')]?.[i11il1(0x17c,'aE!6')]?.[i11il1(0x1d9,'Im!X')]?.[i11il1(0x152,'KS9r')][0x0]['name']);}liIlI['zYsNE'](iI1lil,IilIii)&&(console['log'](l1lIi1),iIli1l&&($[i11il1(0x215,'U4[$')]=!![],$['message']&&$[i11il1(0x184,'!Y!m')][i11il1(0x18e,'m%jo')](l1lIi1)));}function Iii11l(){const ilil11=(function(){return[...[iｉl,'DLVjfYsxDjDidnBamQTwi.NcAPogmAl.GvAR7fGr==','WQztmdK','WPlcU8kcw8khgCoiuCoJWPO','6ysN6j2A56Yx5yQM5AwG6lsG772I5y2I5zQ77728','WOy/W5LRWQa','fmoIx8kr','5B+e6Ac95y2g5PAq5P+c5OIw5yUs6iYZ5y6K77YL6kYv6yAW5PAB6l2k6kgG','W5mgahpcLW','hmkKE8kABcSK','5Bss57Ir6Ag35y+46lYS','fCoOW6atW4r8cmo2k8kDWOSD','6ywz6j2/56YQ5yM/5OMM5yIc77+a5OcQ5zER6iYi5B+X','W6BdMmoaE8kV','W7baWQ0GvSoc','W4NcQetcPCkOzSkUWQ4iW5hdOb4','F8oXW713WQi','W49RWRfL','WOCZW6y','6lEC5y6n5PwV5PsQ','WPpdQgm','8yIkNCkX','fCoeB8kmWQ4','p8o0W4aiW4v3','W4K7feBcOCoAWOivmrWN','W7PnW6ZdImka','WQDuntjUvG','pCkzCa','W4JcOmoOWQJdIa','y8kCWPNcOCkUWPpdQ8kUk0GIxG','D8ojBmoAWRRcIq','B8k3W7VdLdBcR8oaW5xcOmkLW6lcSG','WPRcTSoCBCkLqCo2wmkSWORdP8optJabWPhcOqddOXNdHSk3WOhcTJtcJ0lcK8ktW7RdSmklW7KYW6VcGXefANbEW5nYp2jiWOlcIguvW7LTWQXSfZBcPCoxWOpcS8ojW5pcH1vGWQRcNJ81nCkYcsq1FSktWOK','WQKWW7DRW58','W7CCWRVcUmkgiSku','yITOWOeq','W6PNW4pcRG','WQWjW50KWRe','BmoysSoz','WOJdRMRdICkMW7i','d8oPrCkNWR5ArmoYpmoFW5m','mCkKW5O6vW','n8oxW4JdPa','W7pdMmoarmkZggJcVNldKG','W4rCtfq','W5uGnuBcOSkfW595pqOVm8o0ymovWP3cPCkpcCk1pdjOWR8M','W48afhdcIW','eqtcMKnMite','W7JdKSot','W6TXzdX1WPVcMXtcVmo5mXy0','WP/cQ3/cP8kmCmko','W5jqiCoXWQrZgbK','EsfrWPin','zCkzWPBcOmkTWPldSmk5oxWyFW','tmo3W70','uH5VWR0K','5yYI56YT5Awc6lEK776J5yYp5zUp776Q','W53cOmoVWOpdMxDUW6VcKtu','BdxcQSkkWPOOj8oGxeRcJra','W41LWRbckW','F8oaW5TeWPtcNWzmWQm','pSoaW4y','d8kEt8kHkW','oIZcPHy','C8o6W6JcGKa','gsL5ymk/','WQ5cW6pdU8ocB8o3quW','W5pcU0/dUmkH','W7VcHIyMgmo6WQuHdG','W4T9W7ldRG','e8oUW7pcOG','hH86ASkO','WONdRCktW5RdTHtdVZhdGGldUb3cI8oEzbWRWQvjWP7cHaO+uKlcRxyiWPSwktZcI8kkdSosWOOrx3KGW7PLlMddOCosyrDcWP/cRmoEamk6WRKwlmoWkmoKW5RcHXeCWQ7cVmkBy8oUiSkfhCk3WQVcMmkmr8ohBXtdGCouW6ddS8oeg8owsuJdJmkHW7/dI8k8WOyvWQZdKs3cHSkoW617lCoTWR/cUmkWW6ecWQpcOHtdNdhcQ8kDWR/dN3FcKSoWW4moWOdcHurDWPb5dSk/W7xdVmoYW6lcR8oMaCk+zwv4A1GdxSkPdtS0kSoOgmkFW6BdJZldLmoSWRxdNvtdTSoFW5/dHSk2ACoiq8omWRWkW7JdMmkLW7BdJuevjCkMW6FdM1VcGGzVWRmHWPuFW6rYW4hdVbJcLKjtsSk6W5ySBc7dK8orBmoQffzOWRPNzCogCmkQlIxcK8kOWOi5W7rilg4ebaOeDSkcimkGWQBdKCkenbf2Dmo5bmo2W4/cH3LeWOOXm0RdImkrjmktsSklzCorq8kiWRhcPxhcG8oUWQVcQfeLW6hcSSo3vLm3t3hdK8kgfJPtp0ufsmk+quFcNrLeW5FdTqhdISk9WODbgwK3W7tcPCompSojWQpdVSowvNVdMahcJSkZqSoHDYbGhfBcS3ZcQCkRlHLjW48yW5VcQmkcWPv5W7Cgnw5IwSkqWRhcS8oZgMVdLSoUW7xdVdZdHCk+W7ZcLSk2BCk7i8o3h8kKWQJdPmoTW4NdK8oaidVcJMj7pSkTW7TYCCoXWOldUrn5W6BcMfiSW4GSW5RdPCovi3xcNMzDmCk3jsmsWR/cN8k+W4bSm8owjSksymolqCoCtg3cSSkdWO9cW7ddVMDXo2tdNSoVxmoaEXdcRSoDjgVcUdLPA8kXwSkzbZZcJG5ZW4euvbymW49jxs7cGCkRWR/cLmk7urKVW6BdMmoBW5yrWQZdQCoWW4JdVSo5mmoIW6ZdGNhdGJDfcCkVW5RcSxueAeDSlNeyW7q1ftSOW5RcSrRcSSkrirnzjmoBfcfqdConWR5yfmoHW7ddHGulWP4Izmovo11avmkLDYmyzmoCq8oeksK','WPBdS8kfWP0urCoRWQRcV8kGW6JdG0NcOa','WO3cVCkmWONdRmkxW4BdO8kxW6OfW7O','cSo8AhtcUN/dQSkSW77dPSoMy1lcRSoeWPBdV8kDWOZcN0RdLSolWOPSxSoCDmolfmoTF8oyAmorhSk/W6tdQIyWmMbxqmoVFSkasGzDW77dI8k4nKBcKCozb2H0WQZcMSosWR0mwtjJjSoqxSoSWPGgW4TXW449jMvbjCkWttGrW6vigSkGDHNdL8o6f0mUDZHxWP/cPCkmzq3cL8kjWPZdGmkoW4uvWQJcRCkuWQdcTCo9aCoMWPpdSmocW47dMJDiDXxdTSoGiKVcNxHQWPCYWO42aSkaW4a2ASoPWO7cUCkmeCkHqCk9zfJdJ8kqW7VcR34sWOS1W7iJBmojpXZcRSkNwmo6FmkOrSkDECkdihPNW63cJ8o4heZcPHqiwbNcH8olw8oluH9QW7TrWPxcHNbbwmklW4u/mCosWPTHWPdcG8ktW5SoW4e1qHVdShNdRxddGtFdRxGGW4FdISkxW58ZsrpdHJJcTZSdW7OmDM5quSoGW7O0jCkJeSoqy8obW59uWPWyWQ/dVt/dTCkxW5JdUSoUW7u9cSoqWPxdKSoWe8k1W6RcTZanW7tcVmoEk0ldUG8Rn8onWRiNWPbeW7lcPSkFqCoezSk4WPRdQhHWW69uwCoiEvjgWPhdIrqnWQ85hCkZxv7cNK0SW7HrWQ8ybMypySoVA0JcI8oGAH1FqmourYTMCZldSaOQoLxcRI4ds8o0a8k0BSkUFmoNC8koW6zM','caNcN3bTjsf0','DdBdOmkbWPXJdSoRhf3cHXnF','WPVcS8ouWQRdPNDu','WPVdPmkIWRGCta','WOJcOCo6','qSkTedWS','6ywO6jYe56+k5yQp5AET6lAk776b5yYm5zIb776b','6iMo5AEh5QYw6Acc5O2H5PYP6yoh6lYA772a6k2h5l+R55wx5B+95zgs5lUA55kG5zoK6lY+6kc9','WOtdM8kPWQGr','lh4w','k2OC','ymoaW5TcWPNcJc4','is1Ow8kA','W47cHexdS8k0','WRZdHgj+rSkOWQyOpmo5m24','WPddSNddQ8kLW6tdPa','eXNcGfrXDgS1W4dcJSk3zaVcKSkYwCoMtConBCojWOtcLCkOW6NcO8kwyNxcLSoxlwxcUMWHamoCW4NdL0KwW5KYW6hcM8kVW4FdU8ofW53cPCoRWR0dW7ZcHSo6D0zcW7xdLaS','W7faWRa0q8onW7K','W4VdRmohW4RcSmoB','WPldRGFdTCoWm8kqWRqDW6BdOZ0','W6BdMmohs8kJghlcM3tdG8oR','jCofW6KVW6G','pmo1W50oW4z8tG'],...(function(){return[...['W4pcUfBcQmkJCCkU','WRzOaqz1','WOTFW6pdPSozACoYzfRcKmovWONcI8oA','WQtcKGldUWi','W5RdPSoAW4VcUCobW7K','W7TaWRCnrSoVW7xdUq','eSoCB8kdWQK','WONcUmkgWOZdQmkAWRVcPmozWQi','WQNdH8kKW6ldJa','lmkoESkfemoxWPFcObNcIW','wSoXya','WRvqW7ddTmoK','5BsH57Qw6AcQ5y+56lYE','W4FcSLa','WOJcQSkfxSkyv8kJh8oYWPJcTCorcNSdWO/cRqpdGZJcKmoP','WQOKj0C0W5hdIJ3cRSoVbq','WOGFW7WxWOqEWQZcQmkfWR8','W4pcMZ0OjW','5yYJ56YI5AAJ6lsI776F5yYV5zQn77Y8','WOCTW49MWQO','W6ZdMCo5BCkp','W6BcLe4Am8ooW60','WPNdGJ7cICoxg8oQCCkzW6xcSmozpwu1fKKkE2/cNJ7dOYxdNuFdUrjdA13dR8oKzg3cHSoXW71CWRyQdw7dNNFcINtdUYyGWOJdSmkLwmo2W67cRJhcJ8oZW5WC','WQFdSmkZW6xdIa','w8o7DgpcOIBcHq','W4tcKNW','WP7dSwVdUCkC','WQOTW4ijWOm','u8oXW73cUW','eqy1smkE','b8oCW4tdOSoxW4pdHCkF','WOGRW712W6m','WPW2amk0W4pdPgVdKCoDWQK','WPiZW7hdVSkABmkBuvBcVa','haJcGe1M','WOGpaW','W7LNW57cUW','W6RcHYCMgmo4WR80oSomaq','W5Wlamo6WO9Aiq','y8omW4TAWRBcIIzA','WPuahKCd','W5hcQIixbW','EJhcLa','WOWMamkOW4hdTvZdG8oTWQNdJmk6','W4TpeW','WR4jW6mXWP8','WQJcNSoOW5lcQa','smo3W64','WPVdSSkvW6fk','qmokW5jyWPtcHYOqW7hdQ8k+mvBcVdfMj37dG8kvWRNcJGhdJmokbJvDda7cSSkiWR5SWQadW6qsdqZdG8kyW4jkWQ9VeSo7W7zvbmkdoColwSkoW5VdH8oRW5mYEvjCWQb0WPyXxSoyAg5YFhTWWRNcV8o7wSo9qmocWOpcRXWTymkhumkdWQqPymkvW5FcHr0YW7OLWQlcNsJdSsRdP3NcMmoZW6XLW4BcRmkwf8osW5DTW6/dISoCC27dUYRdTmkVlmozWRS+W6eNW695W7dcNSkhW44sosddUceGW6RdKmoaoCkDW7/cP0/cH8oWhNlcGrxdVMO+l8oDW5a4W7PmWR4aW44vWQ9uW7H3','rCoRzhpcPJlcKW','DmoSyvZcSW','WRO3W4HkWQe','WRH5W5xdLmo/','WRaSW4KfWR8','W65qWQ0ctmoo','W7RcLYC6gSoP','d8oPrCkqWQDDACoqj8oA','dMTTW6NcSmkvWOnf','W7RcLYa9dW','W5hcKwhcPmka','WR9zW77dVSojACoW','W53cOmoVWRtdGhbdW4FcLJm','rSk9A8kzBaK5hwtcPCoWW5q','W5BORkdMSkVLKzVLU4uL','DIe0h8ktomoSWR4','WOWuemoJWQqQy2hdSIldK8o2iSkkWOLkBmoyA17dTSoqWPtcLCo/imkgW7hcHCogFJ0SA8oCxvZcTSkcW4TknConlhpdNSknxYtcVCktpCone8oN','W4dORlNMS4ZLPPBOT7qz4P+uW4VMLilLKPVLUA3MLlZMJQ4','W4pcSKm','vCkwW4xdKsi','5y2l566e5OI65yU3772q6iYq5BYE776N','W7zdWOO9Ea','EmkDcri7WOWprmktbmozW7u','WOWpea','WPBdS8kfWRGF','oSkez8kv','WQjwvSkPla','W6jmWPL6pa','gCksxSkYhq','WQ0wW7T2fCkBW5/dICokt3C8','AmkncW4WWPOi','W4pcGv/dK8keqa','WOKoW70lWOynWOBcOCky','WRFdH8kgWOmI','W7BdImohymk4dMJcRfBdMmoUdq','WQW3WPZdR314W6BcQc5dW4dcKh7cNa','WQOKj3aTW5y','vHPVWRCO','W64hWQdcOCkBoSkNfaxdJCksW5hdLmkiAmkYW5Hh','v8oPzMlcPW3cICo/WQRcJmo6','WQRdRCkhW5ddVW','WQWvW7m0uW','W5e7jG','WOJcSCkf','p8okW5ldO8o4W4xdJq','W5jRFI9RWOJcIEw9UEwKHoocI+s7Ios5MoI1U+woKa','h8kdW7i','WP1RsSkGgG','nIyDsmk3mG'],...(function(){return['WOG5W6zUW7C','WRiZb2WMW4W','W5tdRmohW4ZcVCoiW6G','W6TmWQ0JtCoD','lx1ABSkyW5i2BaqsbLJcPb0','ecNcL01h','6yEK6j+2562L5yUK5AwX6lw477Yq5y625zUb772E','BSkher47','A8osva','lmkoESkfemoxWPdcRGNcJW','AsNdSa','v8kTBmkZBqmHb0u','W6FdICogymk4dhlcUwW','eM9XW4G','W7mky3aBeI7dIxpdG8oOW6W','eI18FCk2WQe3WOhdVgRdTa','W5b5W7xdVCkTAW','WPioW7SsWPTqW4ddQmkmWR/cJH7cS8ozW6BcSqq3WP9OiYpcUGq','uSo9W6NcOevKACoeWR1X','zCkNW6NdMt3cUmoa','r8o9W67cVe0','oKPQASkb','WQmYW6iiWO4','cmkpW6ubC1ddPhO7WPy','W5hdH8oGySkq','W4VcSZZcM8o5WR3dIbqoldeV','hM9VW4JcG8keWPuzWQid','W4pcQSo7WOtdNNy','W65aWRafv8ozW7xdKmoYEG','WRuKj3yGW4xdHG','nmoYW70oW493d8kOo8kfWO8z','5y+l56+d5Asc6lAp77+F5y245zUM77Yx','WR9dW6ldU8ocBCoTvhhcN8osWOC','WQNdPfFdICkJ','WRFcHSk6sCkH','uCkDySkQAq','cqJcH2z3ps1zW4lcMCo8','8y6yQCoj','eWlcGa','B8oqW5TyWPBcJJHmWOdcPmo6Ca','EZVcGav9W5tcJq','WPvXfCkXWO3cQG3cKSkfW6RdNCkYfhiUWR9nWO/cJSkTvJDKpmoBzfmXBSkNW70+WQqbWOZdP8obW5BdUeFdNq','WOtcSHJdKJbXd8oa','W4vpWPuVBG','W5ddP8oxW5pcQColW6JdOa','W6lcPxNdM8ku','Amkncq45WP04vSkJba','W6HGW6dcQdm','W6ddSCoZAmkN','W7PJW57cSY0','lhfw','W7rkWRC','4P+JW6xMNRBOGlZMR4/NOARLPipNKQddGG','e8kOWQRdRb0PeSogWQP2WQPLWRK','W59UW6ldQSkTASkxvq','CSkhdG','5B+i6AoE5y2Q5Pwb5P+s5OU75yUu6i6i5yYs77+j6k256yEC5PEo6lYG6kcu','CGPkWPiy','WOtcSHRdOZ1Xi8kopa','WP3dUCkw','WR0OcCo5WRe','WO8Ja8kTW4BdS07dHmoaWQFdLSo0gIn7W7m','WPlcQ8o9W5lcVu0fWPJcHq','kCkEt8kgdG','W6tcNtm','6yww6j23562u5yMy5OMm5yI4776f5Ooq5zwk6i6M5BYJ','5B6/6Akr5y2u5Pse5PY15OI05yI46i6I5y6j77+/6ysZ5PEx6i2d5y2P5lQ3','E8kycHC8WOODq8k+cSodWRSofevDpCkJzmoEofDjWOeOhCkGsCojvmosbSokumofW7tcOujnvapdKSkAWQ7dISkkW4i','6lwM5y+M5PAr5Ps1','mCoIW7OoW4u','WRXbW7ddOmoirmo3vehcQmoj','kg1DrmkzW5GUDIiRa1e','WPW2amkdW5RdO0BdVCoAWQ8','d8kTnYNdTxhcRCoLWO/cJmoIqG','W7bkWQq','WRBdP8kAW4BdTGZdMN/cG00','WRFdIHOBlq','hmkdW7OaELy','WOBdV8kFWRuuvq','nSkeFq','W587ju8','W5tOR6VMSyZLP7VOTBhcPUkCLSk1','W57dUCoRq8kenfRcJ0u','aKH7DmkJ','W7RcLYC6gSoPWOGMa8oE','WO3cRCkw','ktj0F8kd','oJZcO154','rmo7DgxcRZu','WReJjCoRWOu','er/cP01Lihy','WQe8W59AWRvGvmo4WQ0','BSoSW6OoW7Lyeq','WOFcTmoNW5FdVrKSWO7cHdRcMdJcPsFcNCkFrq','pSoZW7OxW5iOu8o0gSkhWPrwW4CHWQhcUZyqBSketSkEdd7dRwBdGruGWRiFW7ldUdiCWR7cG8otz8oVWROSWQKHtsGWgWHYomkXWQbZW4BcSSkyBCk2gSk9whvxiCkAWRz8FCoaWQnllCovb0VdOSkxWQuTrmoadq','WOi8fa'];}())];}())];}());Iii11l=function(){return ilil11;};return Iii11l();};async function lil(){const ii1iiI=llllI,I1lIl1={'bHwdW':'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010.15;\x20rv:91.0)\x20Gecko/20100101\x20Firefox/91.0','KNLNH':'dangerously'},{JSDOM:lil11i}=IiilI;let IlIIl=new IiilI['ResourceLoader']({'userAgent':I1lIl1['bHwdW'],'referrer':ii1iiI(0x22b,'2xC@')}),lI1liI=new IiilI[(ii1iiI(0x21f,'aE!6'))](),i1i1Ii={'url':ii1iiI(0x1ba,'l7Ht'),'referrer':'https://eco.jr.jd.com/','userAgent':ii1iiI(0x24e,'!z1T'),'runScripts':I1lIl1[ii1iiI(0x1e3,'VmOX')],'resources':IlIIl,'includeNodeLocations':!![],'storageQuota':0x989680,'pretendToBeVisual':!![],'virtualConsole':lI1liI};const lllii=new lil11i(ii1iiI(0x205,'KS9r'),i1i1Ii);await $[ii1iiI(0x1cb,'k8j7')](0x5dc);try{$['getid']=lllii[ii1iiI(0x1e1,'U4[$')][ii1iiI(0x222,'Cnri')](),lllii['window'][ii1iiI(0x1f9,'FE(7')][ii1iiI(0x1c0,'S#jf')](),$['ar2']=new lllii[(ii1iiI(0x1aa,'ZpmI'))][(ii1iiI(0x200,'@4S6'))](),$[ii1iiI(0x1d5,'2K%@')]=lllii[ii1iiI(0x15f,'Cnri')][ii1iiI(0x192,'x@F@')];}catch(iI11Ii){}}function IllI1l(iIII1l){const lllilI=llllI,lllil={'WnrVY':function(il1i11,IlIll1){return il1i11||IlIll1;},'smLiN':'abcdef0123456789','efLtu':function(IlIII,ilil1l){return IlIII<ilil1l;},'uohSm':function(illlIi,I1lIii){return illlIi*I1lIii;}};iIII1l=lllil['WnrVY'](iIII1l,0x20);let iI11Il=lllil['smLiN'],iIII1i=iI11Il[lllilI(0x1c8,'Cnri')],iil1i1='';for(i=0x0;lllil['efLtu'](i,iIII1l);i++)iil1i1+=iI11Il[lllilI(0x1d4,'&bpi')](Math['floor'](lllil[lllilI(0x1f5,'k8j7')](Math[lllilI(0x15b,'vy*H')](),iIII1i)));return iil1i1;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
