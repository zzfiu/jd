/*
活动名称：服饰美妆签到

cron: 35 4 * * * jd_clothing_beauty_sign.js

*/

const $ = new Env('服饰美妆签到')
var iｉl='jsjiami.com.v7';function iii1II(_0x4161f3,_0x52ec44){const _0x5482a9=Iii11l();return iii1II=function(_0x152485,_0x2bdb1b){_0x152485=_0x152485-0x1d1;let _0x3a0978=_0x5482a9[_0x152485];if(iii1II['Xbyzpg']===undefined){var _0x562fad=function(_0x19b356){const _0xb69eba='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xbfb1e0='',_0x10d59d='';for(let _0x7a806=0x0,_0x40c747,_0x3f8fb7,_0x3abcfc=0x0;_0x3f8fb7=_0x19b356['charAt'](_0x3abcfc++);~_0x3f8fb7&&(_0x40c747=_0x7a806%0x4?_0x40c747*0x40+_0x3f8fb7:_0x3f8fb7,_0x7a806++%0x4)?_0xbfb1e0+=String['fromCharCode'](0xff&_0x40c747>>(-0x2*_0x7a806&0x6)):0x0){_0x3f8fb7=_0xb69eba['indexOf'](_0x3f8fb7);}for(let _0x5b3015=0x0,_0x363887=_0xbfb1e0['length'];_0x5b3015<_0x363887;_0x5b3015++){_0x10d59d+='%'+('00'+_0xbfb1e0['charCodeAt'](_0x5b3015)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x10d59d);};const _0x535929=function(_0x34d771,_0x144844){let _0x31f688=[],_0x6d2784=0x0,_0x18bc26,_0x3f9211='';_0x34d771=_0x562fad(_0x34d771);let _0x5c45d0;for(_0x5c45d0=0x0;_0x5c45d0<0x100;_0x5c45d0++){_0x31f688[_0x5c45d0]=_0x5c45d0;}for(_0x5c45d0=0x0;_0x5c45d0<0x100;_0x5c45d0++){_0x6d2784=(_0x6d2784+_0x31f688[_0x5c45d0]+_0x144844['charCodeAt'](_0x5c45d0%_0x144844['length']))%0x100,_0x18bc26=_0x31f688[_0x5c45d0],_0x31f688[_0x5c45d0]=_0x31f688[_0x6d2784],_0x31f688[_0x6d2784]=_0x18bc26;}_0x5c45d0=0x0,_0x6d2784=0x0;for(let _0x49879a=0x0;_0x49879a<_0x34d771['length'];_0x49879a++){_0x5c45d0=(_0x5c45d0+0x1)%0x100,_0x6d2784=(_0x6d2784+_0x31f688[_0x5c45d0])%0x100,_0x18bc26=_0x31f688[_0x5c45d0],_0x31f688[_0x5c45d0]=_0x31f688[_0x6d2784],_0x31f688[_0x6d2784]=_0x18bc26,_0x3f9211+=String['fromCharCode'](_0x34d771['charCodeAt'](_0x49879a)^_0x31f688[(_0x31f688[_0x5c45d0]+_0x31f688[_0x6d2784])%0x100]);}return _0x3f9211;};iii1II['JRKbIn']=_0x535929,_0x4161f3=arguments,iii1II['Xbyzpg']=!![];}const _0x385a53=_0x5482a9[0x0],_0x445278=_0x152485+_0x385a53,_0x3766da=_0x4161f3[_0x445278];return!_0x3766da?(iii1II['yzAstm']===undefined&&(iii1II['yzAstm']=!![]),_0x3a0978=iii1II['JRKbIn'](_0x3a0978,_0x2bdb1b),_0x4161f3[_0x445278]=_0x3a0978):_0x3a0978=_0x3766da,_0x3a0978;},iii1II(_0x4161f3,_0x52ec44);}function Iii11l(){const iIli11=(function(){return[...[iｉl,'RpjGfsVjiQwaEmAiU.ScnDNokMUmVY.yJvPw7CuQ==','kenjumkzWPRcRbCDWORdSeJcTaDZjq5nW4/dPmkDCmoAW7HZtG/cO8o0WPhcOSkVCmk9ir55WRtcLX4BdYujW5tcHIG','c8kcemkfWPK3oNDFWPpcI3/cI3BdMq','WOLzWPTXW4BcMq','gSoDeYvgEaS','8yg7Qaa','WRJdTaddQbTAW7tcTLZdS8kx','ybjqwCk8W5pcMJrx','8lY+Is7NR43LIypMIzpLIBNVVR/OJidLViu','WO98WRzSW4S','WOhdIsldMte','AhpcUSofWRxcV8kDW6CRjHG','WRKNWQZcHcu','WR9+r1xcOq','44kf5O+356sy44gk6k2I5ywe6iYy5y6hhutdMLr2lW','WOBcOHq','AMNcL18/W63cGmkzWOpdMY/cS8oF','WQ42wa','wmk9nIuhnmk2','W6fIW67dKuFcRr/dGJ7dV8oZWPK','oMddOSobnh01','dWJcRMPqWOu9AaZdH1JdGG','4P2TWQRMNAJNNRhORR/MSkxcLG','WQ3cRSozWRldN3ddOmkKWO3dKSkiBa','WQvMeWO','WP08WROgW7C','W4FcPmofWOXd','W7uOoeG','W5pdUKBcL0CKzI/cOCoBwe9U','fmoXcYHP','fCoxdZPcFGa','W6ZcICo5rq','W5pcR8oCW7/dH05gy8k5xmoz','W7q/WPzzCW','bKufbK4','WOFcQaddNbb3nq','WPaaW4y','WQFdTatdUGHzW6i','W5uGWP1iFSo3BmoIx39pgbvs','W6jZAq','qb0/W6VcQG','hCokft0','je80f2K','W602tSoe','cuaEW5BcJsDXWO0FWPxdUCoNWRbzw8oJy8khWQGmWODcW44dfelcPG','ncFdP8ky','W7ZcK8o+qXFcPSoaWQhdRmo8WPqIWOJdOW','W6bSlW','if4kvSk5W5i','W68fWRrtBG','muJdVmo8iq','WRveq8kjsG','WPRcUaddHW'],...(function(){return[...['a1W1a0TN','W4tcRSolW6m','WOhMNypPPiBNV6JLPypNRApLIAG','qSkyddyF','WQFcUcldOrG','W77dGfKdWOmnySoryCowWQDp','WOC4WOqGebrk','W7JdTbpcOaG','FvtdUsHNWROLjI7dTa','pxKkwCkaW4ZcO0CsWPpcUtNcR3SsmGCXW7xdN8ocDCknWP0TtKe','WPbSWOzhW5S3W7hdOrS','W7lcNCkOW5S','W6VcNCkSW4O','kWlcRKT0','W6PXW6/cJKS','FYSaW7xcLW','WQtcQatdQXrGmrxcO8oNsKb0cSkozq7dQq','WQbDr8oXACk4WRybz25UbG','WQ84vI0','WPWjp0nT','ktldKCkgW6NcLa','WOCqWQnsn8orW6m','DSoUkSkLW74','r8oTtG','WQPDWPLxW6e','m1SuF8k+W5xcTWTpWPtcO1FdSe0WlKXaW67dKSoEDCoiWRGXf0RcQmk2WORdUCk9AG','xI0QW5xcLq','A8o9cJuR','W4Pub0TZ','aJ07pNC','W5aPW4qAWOXMW53dKtCcWQ0e','WPPCWOvyW4hcNHBdSerBWR/cGhjJzsZdRSoLW6RdKWhdJvysAvzVW4RcISoJWOpcS3G','W4VcSSoi','W7P8W7RcRMe','WQtdUbtdOIDFW6RcMG','W6mRfWlcOg8R','WQeNWR7cGXpdRHO','C8oVkq','CCkkaYup','lWJcRMPqWOu9','W6nVAq','W4VcPmoCW6NdKMPm','WRn6AaPQmexcLCo2ga','WQ/dTHVdNMS','aeauW4xdQSoIDG','W6qGpuHDeW','WRLrfaRdRW','fxadW73dUW','6iIN5B2B5BIh772p6k2H5l6t55w/5P6i5z2U57+657U+54YB5Agj6l226koNta','WQGvtbtdMq','xbDjWOxcPCk0','WQqueMJcPt3cMrigtCorFLy','fLXBWPhdLhO0W6evWPBdV8odWPu','W68SiK9zbKW'],...(function(){return['W6tcKSoAWOyKWQxcS8kcW7VcMqynF8kfWPVdP8kO','W6/cICkNW73dHbddNq','WRSvEefMagpcJHe1W7JcO2u','56665yQo5OMi5yIZ','WQ0rBgmG','BConACk6W7rOW5m','oINdVmkf','W7Lirq','W64JbHlcVa','WQFdJd3dJvet','WOmAWQu','W4LaW5S','W7eyicVdHCkUW4Otoa','gCk5WR/dKuK','WR50WRL4W4q','WO3cOmodWQxdKG','cchdQ8kpW4K','W7zitd3dVgS','nuzDASkzW5pcKa1fWR/dTdpdLKOfatzrW73dRCo3z8kPWPbUa1S','WQCue2RcPd7cNZaAt8onDwO','WOL3v8kCtG','WQW4uIy','CNZcGe0QW6/cPG','dKVdHSodiW','W6dcK8oPzH7cTmou','W7NcOColWRvs','W6CHeq','fmoDgW','W60Kqa','WP4CWPFdSriKBh13WRKt','WQ09WQ0BW4VdLvxcNG','WOdcIrNdTWq','WQhcLaDqW45t','WPn0yXpdHW','BCo7WQhdPZG','WO93WPm','WRGtEuKVCXVcNIWy','WQWqf2pcOZJcMrKOESocxNe','WQtcNHO','zSkngYeU','WOGqWRz+z8oqW6q','6lAP5yYr5Pw95PwO','W7JdOatcGNu4bmkeC8kFW7W','xZOpW6NcLa','W5ayDmo+','4P+QW6hMNOxOGAFMR5dNOApLPk3NKiRdSG','c8kGAh5ItCk8','W4zhW4FcP18','wCorrSkgWPG1FZaiW5VdK3q','p1Gd','WPLhwYBdGG','W6RORABMSlxLPRJOTyWE4PYBW5/ML5lLKzJLUAZMLR3MJPW','W6pdTr3cLYTTwCocFmodWRZcMc93WP3cRGCppa'];}())];}())];}());Iii11l=function(){return iIli11;};return Iii11l();};const l1iIIi=iii1II;(function(l1iil,ii1l1,lIIill,I11iIi,I1ilII,I11iIl,l1l11l){return l1iil=l1iil>>0x6,I11iIl='hs',l1l11l='hs',function(IilIil,l1iIi,l1l11i,l1iIl,illIll){const lIII1l=iii1II;l1iIl='tfi',I11iIl=l1iIl+I11iIl,illIll='up',l1l11l+=illIll,I11iIl=l1l11i(I11iIl),l1l11l=l1l11i(l1l11l),l1l11i=0x0;const iIli1I=IilIil();while(!![]&&--I11iIi+l1iIi){try{l1iIl=parseInt(lIII1l(0x1eb,'k&DB'))/0x1+parseInt(lIII1l(0x24a,'$yuI'))/0x2+-parseInt(lIII1l(0x227,'K&ZG'))/0x3*(-parseInt(lIII1l(0x1f7,'aWrj'))/0x4)+parseInt(lIII1l(0x220,'1GlL'))/0x5*(parseInt(lIII1l(0x20f,'I&wJ'))/0x6)+parseInt(lIII1l(0x205,'K&ZG'))/0x7+parseInt(lIII1l(0x200,'x9^u'))/0x8+-parseInt(lIII1l(0x228,'x9^u'))/0x9;}catch(Iiil1){l1iIl=l1l11i;}finally{illIll=iIli1I[I11iIl]();if(l1iil<=I11iIi)l1l11i?I1ilII?l1iIl=illIll:I1ilII=illIll:l1l11i=illIll;else{if(l1l11i==I1ilII['replace'](/[GASYRuJpknDyEPMVCUwfQN=]/g,'')){if(l1iIl===l1iIi){iIli1I['un'+I11iIl](illIll);break;}iIli1I[l1l11l](illIll);}}}}}(lIIill,ii1l1,function(iiilli,l1iIIl,iiilll,lI11Il,lIII1i,l11i11,IilIl1){return l1iIIl='\x73\x70\x6c\x69\x74',iiilli=arguments[0x0],iiilli=iiilli[l1iIIl](''),iiilll=`\x72\x65\x76\x65\x72\x73\x65`,iiilli=iiilli[iiilll]('\x76'),lI11Il=`\x6a\x6f\x69\x6e`,(0x152875,iiilli[lI11Il](''));});}(0x32c0,0x303e4,Iii11l,0xcd),Iii11l)&&(iｉl=Iii11l);const I1i11l=require('./jdCookie'),llIlii=require(l1iIIi(0x263,'PKf0')),llIlil=require('./utils/Rebels_jdCommon'),{H5st:IIlil}=require('./utils/Rebels_H'),ilI1lI=![];let IiiIll='';const IIlii=Object['keys'](I1i11l)['map'](lIIiii=>I1i11l[lIIiii])[l1iIIi(0x1fa,'aWrj')](iI1lli=>iI1lli);!IIlii[0x0]&&($['msg']($['name'],l1iIIi(0x245,'x9^u')),process['exit'](0x1));!(async()=>{const lilIi=l1iIIi,ll1iI={'yMoHp':lilIi(0x1fd,'xHdy'),'kuqdS':function(iI1lll,l1lIll){return iI1lll<l1lIll;},'LQPCM':function(I1l1II,IIli1I){return I1l1II+IIli1I;},'DLvzK':function(I1i11I,llIliI){return I1i11I(llIliI);},'DWIXi':lilIi(0x1e1,'kTWx'),'BdasC':function(I1l1I1){return I1l1I1();},'zIxCZ':function(I1i111,ilI1li){return I1i111!==ilI1li;},'ZfOGl':lilIi(0x207,'dc!P'),'ZQnQi':function(IIliI,ilI1ll){return IIliI+ilI1ll;}};console[lilIi(0x246,'S7RN')](ll1iI[lilIi(0x269,'l0xv')]),llIlii[lilIi(0x214,'x9^u')]({'title':$[lilIi(0x218,'xHdy')]});for(let Iillii=0x0;ll1iI[lilIi(0x243,'$yuI')](Iillii,IIlii[lilIi(0x223,'!Pqe')]);Iillii++){$[lilIi(0x232,'1GlL')]=ll1iI[lilIi(0x1e9,'gbOZ')](Iillii,0x1),IiiIll=IIlii[Iillii],llIlil['setCookie'](IiiIll),$['UserName']=ll1iI[lilIi(0x251,'I212')](decodeURIComponent,llIlil['getCookieValue'](IiiIll,ll1iI[lilIi(0x225,'D@^8')])),$['UA']=llIlil[lilIi(0x1da,'hs1o')]($[lilIi(0x221,'OoFu')]),$[lilIi(0x202,'aWrj')]=llIlii[lilIi(0x20c,')y!7')]($[lilIi(0x1e3,'6hq2')],$['UserName']),$['nickName']='',console[lilIi(0x20d,'O7o!')]('\x0a******开始【京东账号'+$['index']+'】'+($[lilIi(0x1ef,'aKWb')]||$['UserName'])+lilIi(0x231,'lZ%&')),await ll1iI['BdasC'](IlI1il),llIlil[lilIi(0x257,'XZJf')]();if($[lilIi(0x23a,'Ke3X')])break;await $[lilIi(0x252,'aWrj')](0x3e8);}ilI1lI&&llIlii['getMessage']()&&(ll1iI[lilIi(0x21c,'I212')](ll1iI['ZfOGl'],ll1iI[lilIi(0x235,'I&wJ')])?(i1III[lilIi(0x249,'GKYT')]=!![],Ii1iIi[lilIi(0x25c,'aKWb')]&&iliIIi[lilIi(0x1f9,'*EUf')][lilIi(0x266,'gbOZ')](ill11I)):(llIlii[lilIi(0x247,'fUcB')](ll1iI['ZQnQi'](llIlii[lilIi(0x1f4,'hs1o')],lilIi(0x26e,'149a'))),await llIlii[lilIi(0x26b,'S7RN')]()));})()[l1iIIi(0x212,'!6!]')](Iillil=>$['logErr'](Iillil))['finally'](()=>$[l1iIIi(0x24f,'wfvV')]());async function IlI1il(){const l1l11I=l1iIIi,l1lIli={'suzGP':function(II1lil,IIli1l){return II1lil===IIli1l;},'jDjXu':l1l11I(0x23b,'[gkH'),'JwHac':function(II1lii,lIIii1){return II1lii(lIIii1);},'Rjhrh':l1l11I(0x1df,'xHdy')},lIIiiI=await llIlil['getLoginStatus'](IiiIll);if(!lIIiiI&&l1lIli[l1l11I(0x1d4,']m[[')](typeof lIIiiI,l1lIli[l1l11I(0x222,'S7RN')])){console['log']('账号无效');return;}try{await l1lIli[l1l11I(0x1e8,'lZ%&')](IlI1ii,l1lIli[l1l11I(0x258,'&$(j')]);}catch(ll1i1){console[l1l11I(0x1f5,'w)tU')](ll1i1[l1l11I(0x208,'&pZG')]);}}async function IilliI(IIli1i,I1iIi1){const lilIl=l1iIIi,lliil1={'rPrAx':function(IIllI,lliilI){return IIllI===lliilI;},'YOpgu':lilIl(0x1e0,'fKp&'),'UuBfe':lilIl(0x264,'kTWx'),'NrIfR':lilIl(0x210,'U[No'),'EXLLl':lilIl(0x254,'[gkH'),'kHCrN':lilIl(0x206,')y!7'),'yBAwq':'1403','tPCXc':function(lili1,ll1l1){return lili1===ll1l1;},'xUdKp':lilIl(0x217,'bL*j')};try{if(lliil1['rPrAx'](lliil1['YOpgu'],'hfSTt'))li1Ii[lilIl(0x219,'fUcB')]['fix'](Iliiii);else switch(IIli1i){case lliil1['UuBfe']:if(I1iIi1[lilIl(0x256,'[zkX')]==='0'){if(lliil1['NrIfR']===lilIl(0x241,'aKWb'))switch(I1iIi1[lilIl(0x204,'0Z@s')]){case'0':I1iIi1?.[lilIl(0x23d,'aKWb')]?.[lilIl(0x265,'[zkX')]['3']?.['length']?console[lilIl(0x248,'xHdy')](lilIl(0x23f,'w)tU')+I1iIi1['rewardsInfo'][lilIl(0x25d,'&$(j')]['3'][0x0]?.['quantity']+'京豆'):lliil1[lilIl(0x211,'Ke3X')]===lliil1[lilIl(0x1db,'1GlL')]?console[lilIl(0x20a,'x9^u')](lliil1[lilIl(0x1f8,')y!7')]):(delete i1l1I[lilIl(0x26d,'XZJf')],delete IiilIi[lilIl(0x1e2,'O7o!')][lilIl(0x24c,'hs1o')]);break;case'103':console['log']('今日已签');break;case lliil1[lilIl(0x1e7,'PKf0')]:console[lilIl(0x20a,'x9^u')](I1iIi1[lilIl(0x21f,'&O*I')]);break;default:console[lilIl(0x20a,'x9^u')](I1iIi1[lilIl(0x234,'BM#Q')]);break;}else IiilII['log']('❓'+IliI1I+'\x20'+lI1Iii[lilIl(0x1d7,'k&DB')](i1li));}else I1iIi1[lilIl(0x1ed,'XZJf')]?console['log'](I1iIi1[lilIl(0x25e,'w)tU')]):console[lilIl(0x21e,'[gkH')]('❓'+IIli1i+'\x20'+JSON['stringify'](I1iIi1));break;}}catch(l1ii1){lliil1[lilIl(0x240,'Ke3X')](lliil1[lilIl(0x1fc,'*EUf')],lliil1[lilIl(0x22e,'PKf0')])?console[lilIl(0x226,'k&DB')](lilIl(0x230,'XZJf')+IIli1i+'\x20请求响应\x20'+(l1ii1[lilIl(0x1f6,'XZJf')]||l1ii1)):i1l1l1['log'](IlI1I[lilIl(0x25c,'aKWb')]);}}async function IlI1ii(IliI1l){const IilIlI=l1iIIi,lliiil={'FBAFd':'【提示】请先获取Cookie','tugEo':'doInteractiveAssignment','xXieW':IilIlI(0x1dd,'S7RN'),'ddpWt':IilIlI(0x1ff,'*EUf'),'NTGtB':IilIlI(0x239,'Yw7J'),'KgYid':IilIlI(0x1d6,'BM#Q'),'uxBdh':IilIlI(0x1e6,'BM#Q'),'BtFPk':IilIlI(0x238,'BM#Q'),'timVN':'keep-alive','jLsWO':IilIlI(0x1de,'bL*j'),'MuQNi':IilIlI(0x209,'kTWx'),'IPJxu':function(IiiIiI,lilii){return IiiIiI===lilii;},'iWAIV':IilIlI(0x1e4,'&pZG'),'FNUwr':function(l1iiI,ll1li){return l1iiI===ll1li;},'UUYlF':IilIlI(0x261,'uMh9'),'QEYBE':IilIlI(0x26f,'GKYT'),'JExHB':IilIlI(0x24e,'!6!]'),'PUwri':function(Illl1I,lliiiI){return Illl1I<lliiiI;},'QgeyI':function(lilil,ll1ll){return lilil!==ll1ll;},'NWcqu':'rOxbf','RBYdU':function(Illl11,ii1lI){return Illl11>ii1lI;},'XDkWs':IilIlI(0x1e5,'k&DB'),'cSZzB':'Thwal','grTIN':function(I1ilIl,I11iII){return I1ilIl>=I11iII;}};if($[IilIlI(0x267,'BM#Q')]||$[IilIlI(0x1d3,'ic40')])return;let lliiii='',IliI1i={},ll1ii=IilIlI(0x22f,'&O*I');switch(IliI1l){case IilIlI(0x262,'&O*I'):req={'appId':IilIlI(0x244,'149a'),'functionId':lliiil['tugEo'],'appid':lliiil[IilIlI(0x1fb,'wfvV')],'clientVersion':lliiil[IilIlI(0x1ea,']Ahi')],'client':IilIlI(0x229,'!Pqe'),'body':{'sourceCode':lliiil['NTGtB'],'clientInfo':{'ip':'link\x20#22'},'encryptProjectId':lliiil['KgYid'],'encryptAssignmentId':IilIlI(0x215,'BM#Q'),'itemId':'1','completionFlag':!![],'actionType':0x0},'version':IilIlI(0x25b,'y4Hc'),'ua':$['UA'],'t':!![]};const I1ilIi=await IIlil[IilIlI(0x22b,'O7o!')](req);lliiii='https://api.m.jd.com/api?',IliI1i=''+I1ilIi?.[IilIlI(0x26c,'uMh9')];break;default:console[IilIlI(0x21d,'149a')](IilIlI(0x24d,'lZ%&')+IliI1l);return;}const IIli11={'url':lliiii,'method':ll1ii,'headers':{'Accept':lliiil[IilIlI(0x259,'uMh9')],'Accept-Encoding':IilIlI(0x203,'I212'),'Accept-Language':lliiil['BtFPk'],'Connection':lliiil[IilIlI(0x26a,'bL*j')],'Content-Type':IilIlI(0x1ec,'Ke3X'),'Cookie':IiiIll,'Host':lliiil[IilIlI(0x1fe,'xHdy')],'Referer':IilIlI(0x237,']m[['),'Origin':'https://h5.m.jd.com','Sec-Fetch-Dest':IilIlI(0x20b,'149a'),'Sec-Fetch-Mode':lliiil[IilIlI(0x1d1,'S7RN')],'Sec-Fetch-Site':IilIlI(0x22d,']m[['),'User-Agent':$['UA']},'body':IliI1i,'timeout':0x7530};if(lliiil[IilIlI(0x268,'&$(j')](ll1ii,lliiil['iWAIV'])){if(lliiil[IilIlI(0x21a,'l0xv')](lliiil[IilIlI(0x1ee,'1GlL')],lliiil[IilIlI(0x22a,'GKYT')])){IiilI1[IilIlI(0x20d,'O7o!')](IilIlI(0x22c,'[zkX'));return;}else delete IIli11['body'],delete IIli11[IilIlI(0x1f0,'149a')][lliiil['JExHB']];}const IllIII=0x1;let ii1li=0x0,IIll1=null,ll1il=![];while(lliiil[IilIlI(0x224,'I&wJ')](ii1li,IllIII)){if(lliiil['QgeyI'](lliiil['NWcqu'],'Ukhqk')){lliiil['RBYdU'](ii1li,0x0)&&await $[IilIlI(0x1d9,'0Z@s')](0x3e8);const llIlli=await llIlil[IilIlI(0x24b,'l0xv')](IIli11);if(!llIlli[IilIlI(0x1f1,'$yuI')]){if(lliiil[IilIlI(0x213,'kTWx')](lliiil[IilIlI(0x1dc,'PKf0')],lliiil['cSZzB'])){IIll1='🚫\x20'+IliI1l+'\x20请求失败\x20➜\x20'+llIlli[IilIlI(0x250,'OoFu')],ii1li++;continue;}else i1l11[IilIlI(0x1f2,'6hq2')](i1l1li),i1ilii&&(i1ilil['outFlag']=!![],lilIii['message']&&llIli1['message']['fix'](iliIII));}if(!llIlli?.['data']){IIll1=IilIlI(0x23c,'dc!P')+IliI1l+IilIlI(0x236,'aKWb'),ii1li++;continue;}IilliI(IliI1l,llIlli['data']),ll1il=![];break;}else lilIl1['msg'](i1l1ii[IilIlI(0x1d8,'0Z@s')],lliiil[IilIlI(0x1f3,'GKYT')]),i1l1[IilIlI(0x260,'[gkH')](0x1);}lliiil[IilIlI(0x25f,'PKf0')](ii1li,IllIII)&&(console['log'](IIll1),ll1il&&($[IilIlI(0x21b,'[zkX')]=!![],$[IilIlI(0x255,'[gkH')]&&$[IilIlI(0x25a,'S7RN')][IilIlI(0x20e,'1GlL')](IIll1)));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
